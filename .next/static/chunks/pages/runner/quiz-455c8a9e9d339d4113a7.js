_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[84],{Fn2i:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/runner/quiz",function(){return n("oKyk")}])},J355:function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("q1tI"),i=n.n(o),a=n("jwaz"),c=n("N1Wf"),s=n("wHSu"),u=n("NKCw"),l=n("UGp+"),p=n("IP2g"),d=n("NWhz"),f=n("sXnO"),h=n("2BYM"),y=n.n(h),b=n("nOHt"),m=n.n(b),v=i.a.createElement;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=y()(f.a),j=g.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",g.stopTimer),e.addEventListener("mouseleave",g.resumeTimer)}});t.default=function(e){var t=e.runnerId,n=e.pathwayId,f=e.saved,h=e.data,y=e.activityChange,b=Object(o.useState)(h),g=b[0],w=b[1],P=l.d().shape({question:l.f().min(5,"Please enter at least 5 characters").required("Please enter your question"),type:l.f().required("Please enter your type"),options:l.a().min(2,"Please enter at least 2 options").required("Please enter your options")}),q=Object(u.e)({resolver:Object(d.a)(P),defaultValues:{question:"",type:"",options:[]}}),C=q.control,I=q.handleSubmit,N=q.errors,B=q.setValue,k=q.reset,x=Object(u.d)({control:C,name:"options"}),E=x.fields,D=x.append,A=x.remove,_=function(){return c.b.collection("runners").doc(t).collection("questions").get().then((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data()))})),w(t)}))},S=function(e){!function(e,t,n){e.collection("questions").doc(t).delete().then((function(){return n()})).catch((function(e){console.error("Error removing document: ",e)}))}(c.b.collection("runners").doc(t),e,(function(){return y({pathwayId:n,type:"delete_question",msn:"The question deleted."}),_()}))};return v(i.a.Fragment,null,v(a.N,null,v(a.N.Header,{bordered:!0},v(a.N.Icon,null,v(p.a,{icon:s.wb})),v(a.N.Title,null,"Quiz"),v(a.N.Addon,null,v(a.w.Uncontrolled,null,v(a.e,{className:"mr-2"},"Questions ",g.length),v(a.w.Toggle,{icon:!0,variant:"text-secondary"},v(p.a,{icon:s.ob})),v(a.w.Menu,{right:!0,animated:!0},g.map((function(e){return v(a.w.Item,{key:e.id,className:"text-right"},(t=e.question,n=70,t.slice(0,n)+(t.length>n?"...":"")),v(a.c,{circle:!0,onClick:function(){!function(e){B("question",e.question),B("type",e.type),B("id",e.id),B("options",e.options)}(e)}},v(p.a,{icon:s.W})),v(a.c,{circle:!0,onClick:function(){S(e.id)}},v(p.a,{icon:s.Jb})));var t,n})))))),v(a.N.Body,null,v(a.A,{onSubmit:I((function(e){var r=c.b.collection("runners").doc(t);e.id?function(e,t,n){e.collection("questions").doc(t.id).set({question:t.question,type:t.type,options:t.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return n()})).catch((function(e){j.fire({icon:"error",title:"Creation question"})}))}(r,e,(function(){return j.fire({icon:"success",title:"Question saved successfully"}),B("id",null),y({pathwayId:n,type:"edit_question",msn:"The  question created."}),k(),_()})):function(e,t,n){e.collection("questions").add({question:t.question,type:t.type,options:t.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return n()})).catch((function(e){console.error(e),j.fire({icon:"error",title:"Creation question"})}))}(r,e,(function(){return j.fire({icon:"success",title:"Question saved successfully"}),y({pathwayId:n,type:"new_question",msn:"The  question updated."}),k(),_()}))}))},v(a.A.Group,null,v(a.y,null,v(u.a,{as:a.D,type:"textarea",id:"question",name:"question",control:C,invalid:Boolean(N.question),placeholder:"Insert your question"}),v(a.F,{for:"question"},"Question"),N.question&&v(a.A.Feedback,{children:N.question.message}))),v(a.A.Group,null,v(u.a,{as:a.u,type:"select",name:"type",id:"type",control:C,invalid:Boolean(N.type)},v("option",{value:"default"},"Select your type"),v("option",{value:"multiple"},"Multiple"),v("option",{value:"single"},"Single"),v("option",{value:"yes_no"},"Yes/No")),N.type&&v(a.A.Feedback,{children:N.type.message})),E.map((function(e,t){return v(a.Q,{key:e.id,className:"pt-4"},v(a.r,{xs:"11"},v(a.A.Group,null,v(a.y,null,v(u.a,{as:a.D,defaultValue:e.name||"",type:"textarea",id:"options_".concat(t,"_.name"),name:"options[".concat(t,"].name"),control:C}),v(a.F,{for:"options_".concat(t,"_.name")},"Option#",t+1)))),v(a.r,{xs:"1"},v(a.h,{type:"button",onClick:function(){return A(t)}},v(p.a,{icon:s.Jb}))),v(a.r,{xs:"12"},v(a.A.Group,null,v(a.y,null,v(u.a,{name:"options[".concat(t,"].isCorrect"),control:C,render:function(n){var r=n.onChange,o=n.onBlur,i=n.value,c=(n.name,n.ref);return v(a.u,{type:"checkbox",id:"options_".concat(t,"_.isCorrect"),label:"it's correct?",onBlur:o,name:"options[".concat(t,"].isCorrect"),onChange:function(e){return r(e.target.checked)},checked:e.isCorrect||i,innerRef:c})}})))))})),v("p",{className:"text-right"},v(a.h,{variant:Boolean(N.options)?"danger":"primary",type:"button",onClick:function(){D({})}},"Add Option ",v(p.a,{icon:s.ub}))),N.options&&v(a.b,{variant:"label-danger"},N.options.message),v(u.a,{as:a.D,control:C,type:"hidden",name:"id",id:"id"}),v(a.N.Footer,{bordered:!0},v(a.h,{disabled:!f,variant:"primary"},"Save and add"),v(a.h,{type:"button",className:"ml-2",onClick:function(){m.a.back()}},"Cancel"))))))}},"RQ+B":function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("q1tI"),i=n.n(o),a=n("jwaz"),c=n("N1Wf"),s=n("NKCw"),u=n("UGp+"),l=n("NWhz"),p=n("sXnO"),d=n("2BYM"),f=n.n(d),h=n("RLfC"),y=n.n(h),b=i.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=f()(p.a),g=O.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",O.stopTimer),e.addEventListener("mouseleave",O.resumeTimer)}});t.default=function(e){var t,n=e.runnerId,r=e.saved,i=e.data,p=e.activityChange,d=e.pathwayId,f=i.badget,h=Object(o.useState)({preview:(null===f||void 0===f||null===(t=f.image)||void 0===t?void 0:t.preview)||"",src:""}),m=h[0],O=h[1],j=u.d().shape({name:u.f().min(5,"Please enter at least 5 characters").required("Please enter your name"),description:u.f().min(5,"Please enter at least 5 characters").required("Please enter your description"),points:u.c().min(10,"Please enter at least 10 points").required("Please enter your points")}),w=Object(s.e)({resolver:Object(l.a)(j),defaultValues:{name:(null===f||void 0===f?void 0:f.name)||"",description:(null===f||void 0===f?void 0:f.description)||"",points:(null===f||void 0===f?void 0:f.points)||10}}),P=w.control,q=w.handleSubmit,C=w.errors;return b(a.A,{onSubmit:q((function(e){!function(e){c.b.collection("runners").doc(n).update({badget:v({},e)}).then((function(t){g.fire({icon:"success",title:"Badget saved successfully"}),p({pathwayId:d,type:"edit_runner",msn:'The "'+e.name+'" badget was changed.'})})).catch((function(e){g.fire({icon:"error",title:"Creation badget"})}))}(v(v({},e),{},{image:m}))}))},b(a.Q,null,b(a.r,{xs:"6"},b(a.A.Group,null,b(y.a,{width:130,height:130,onCrop:function(e){O({preview:e})},onClose:function(){O({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(g.fire({icon:"error",title:"The image is very large"}),e.target.value="")},src:m.src,label:"Badget icon"}))),b(a.r,{xs:"6"},b(a.A.Group,null,m.preview&&b("img",{src:m.preview,alt:"Preview"}))),b(a.r,{xs:"12"},b(a.A.Group,null,b(a.y,null,b(s.a,{as:a.D,type:"text",id:"badget-name",name:"name",control:P,invalid:Boolean(C.name),placeholder:"Insert your name"}),b(a.F,{for:"badget-name"},"Name"),C.name&&b(a.A.Feedback,{children:C.name.message}))),b(a.A.Group,null,b(a.y,null,b(s.a,{as:a.D,type:"textarea",id:"badget-description",name:"description",control:P,invalid:Boolean(C.description),placeholder:"Insert your description"}),b(a.F,{for:"badget-description"},"Description"),C.description&&b(a.A.Feedback,{children:C.description.message}))),b(a.A.Group,null,b(a.y,null,b(s.a,{as:a.D,type:"number",id:"badget-points",name:"points",control:P,invalid:Boolean(C.points),placeholder:"Insert your points"}),b(a.F,{for:"badget-points"},"Points"),C.points&&b(a.A.Feedback,{children:C.points.message}))))),b(a.h,{type:"submit",variant:"primary",disabled:!r},"Save"))}},oKyk:function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),c=n("md7G"),s=n("foSv"),u=n("q1tI"),l=n.n(u),p=n("jwaz"),d=n("N1Wf"),f=n("0ci1"),h=n("ANjH"),y=n("/MKj"),b=n("tCCL"),m=n("qGWM"),v=n("8Kt/"),O=n.n(v),g=n("nOHt"),j=n.n(g),w=n("sXnO"),P=n("2BYM"),q=n.n(P),C=n("tx4t"),I=n("RQ+B"),N=n("J355"),B=l.a.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var D=q()(w.a),A=D.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",D.stopTimer),e.addEventListener("mouseleave",D.resumeTimer)}}),_=function(e){Object(a.a)(n,e);var t=E(n);function n(e){var r;return Object(o.a)(this,n),r=t.call(this,e),j.a.query.runnerId?r.state={runnerId:j.a.query.runnerId,pathwayId:j.a.query.pathwayId,saved:!1,questions:[]}:j.a.push("/pathway/create"),r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.pageChangeHeaderTitle("Update Pathway"),this.props.breadcrumbChange([{text:"Pathway",link:"/"},{text:"Runner",link:"/runner/create?pathwayId="+j.a.query.pathwayId},{text:"Quiz"}]);var t=d.b.collection("runners").doc(this.state.runnerId);t.get().then((function(n){n.exists?t.collection("questions").get().then((function(e){var t=[];return e.forEach((function(e){t.push(x({id:e.id},e.data()))})),Promise.resolve(t)})).then((function(t){e.setState(x({id:e.state.runnerId,pathwayId:e.state.pathwayId,saved:!0,questions:t},n.data()))})):console.log("No such document!")})).catch((function(e){console.log("Error getting documents: ",e),A.fire({icon:"error",title:"Getting a runner"})}))}},{key:"render",value:function(){return this.state.saved?B(l.a.Fragment,null,B(O.a,null,B("title",null,"Runner | Quiz")),B(p.t,{fluid:!0},B(p.Q,null,B(p.r,{md:"6"},B(p.N,null,B(p.N.Header,{bordered:!0},B(p.N.Title,null,"Runner | Quiz")),B(p.N.Body,null,B("p",null,"Add all the questions related to this runner, these questions should help validate the knowledge."),B("hr",null),B(N.default,{activityChange:this.props.activityChange,saved:this.state.saved,runnerId:this.state.runnerId,pathwayId:this.state.pathwayId,data:this.state.questions})))),B(p.r,{md:"6"},B(p.N,null,B(p.N.Header,{bordered:!0},B(p.N.Title,null,"Badget")),B(p.N.Body,null,B("p",null,"This badge is awarded to the trainee if they successfully complete the Quiz.                  "),B("hr",null),B(I.default,{activityChange:this.props.activityChange,saved:this.state.saved,runnerId:this.state.runnerId,pathwayId:this.state.pathwayId,data:this.state}))))))):B(C.a,null,"Loading")}}]),n}(l.a.Component);t.default=Object(y.b)(null,(function(e){return Object(h.bindActionCreators)({pageChangeHeaderTitle:f.e,breadcrumbChange:f.c,activityChange:f.a},e)}))(Object(m.a)(Object(b.a)(_)))},qGWM:function(e,t,n){"use strict";var r=n("o0o1"),o=n.n(r),i=n("rePB"),a=n("HaE+"),c=n("1OyB"),s=n("vuIU"),u=n("Ji7U"),l=n("md7G"),p=n("foSv"),d=n("q1tI"),f=n.n(d),h=n("ANjH"),y=n("0ci1"),b=n("/MKj"),m=n("qP+2"),v=n("nOHt"),O=n.n(v),g=n("s6m4"),j=f.a.createElement;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}t.a=function(e){var t=function(t){Object(u.a)(r,t);var n=q(r);function r(){return Object(c.a)(this,r),n.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.firebaseChange(this.props.firebase)}},{key:"render",value:function(){return j(e,this.props)}}],[{key:"getInitialProps",value:function(){var t=Object(a.a)(o.a.mark((function t(n){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},!e.getInitialProps){t.next=5;break}return t.next=4,e.getInitialProps(n);case 4:r=t.sent;case 5:return t.next=7,Object(m.a)(n);case 7:if(i=t.sent){t.next=11;break}return n.res?(n.res.writeHead(302,{Location:g.a.loginPagePath}),n.res.end()):O.a.push(g.a.loginPagePath),t.abrupt("return",P(P({},r),{},{firebase:null}));case 11:return t.abrupt("return",P(P({},r),{},{firebase:i}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),r}(f.a.Component);return Object(b.b)(null,(function(e){return Object(h.bindActionCreators)({firebaseChange:y.d},e)}))(t)}}},[["Fn2i",0,1,3,9,11,2,4,5,6,7,8,10,12,13]]]);