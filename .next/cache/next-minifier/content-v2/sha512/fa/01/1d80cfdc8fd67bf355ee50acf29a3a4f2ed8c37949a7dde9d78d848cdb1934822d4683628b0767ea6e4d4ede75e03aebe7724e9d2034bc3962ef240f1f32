{"code":"_N_E=(this.webpackJsonp_N_E=this.webpackJsonp_N_E||[]).push([[79],{\"3UD+\":function(e,n){e.exports=function(e){if(!e.webpackPolyfill){var n=Object.create(e);n.children||(n.children=[]),Object.defineProperty(n,\"loaded\",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,\"id\",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,\"exports\",{enumerable:!0}),n.webpackPolyfill=1}return n}},J355:function(e,n,t){\"use strict\";t.r(n);var o=t(\"rePB\"),r=t(\"q1tI\"),i=t.n(r),c=t(\"jwaz\"),a=t(\"N1Wf\"),u=t(\"wHSu\"),s=t(\"NKCw\"),l=t(\"UGp+\"),p=t(\"IP2g\"),d=t(\"NWhz\"),f=t(\"sXnO\"),m=t(\"2BYM\"),y=t.n(m),b=t(\"nOHt\"),h=t.n(b),v=i.a.createElement;function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var g=y()(f.a),O=g.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",g.stopTimer),e.addEventListener(\"mouseleave\",g.resumeTimer)}});n.default=function(e){var n=e.runnerId,t=e.pathwayId,f=e.saved,m=e.data,y=e.activityChange,b=Object(r.useState)(m),g=b[0],w=b[1],C=l.d().shape({question:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your question\"),type:l.f().required(\"Please enter your type\"),options:l.a().min(2,\"Please enter at least 2 options\").required(\"Please enter your options\")}),P=Object(s.e)({resolver:Object(d.a)(C),defaultValues:{question:\"\",type:\"\",options:[]}}),_=P.control,j=P.handleSubmit,x=P.errors,k=P.setValue,I=P.reset,N=Object(s.d)({control:_,name:\"options\"}),B=N.fields,E=N.append,S=N.remove,T=function(){return a.b.collection(\"runners\").doc(n).collection(\"questions\").get().then((function(e){var n=[];e.forEach((function(e){n.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){Object(o.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({id:e.id},e.data()))})),w(n)}))},z=function(e){!function(e,n,t){e.collection(\"questions\").doc(n).delete().then((function(){return t()})).catch((function(e){console.error(\"Error removing document: \",e)}))}(a.b.collection(\"runners\").doc(n),e,(function(){return y({pathwayId:t,type:\"delete_question\",msn:\"The question deleted.\"}),T()}))};return v(i.a.Fragment,null,v(c.I,null,v(c.I.Header,{bordered:!0},v(c.I.Icon,null,v(p.a,{icon:u.rb})),v(c.I.Title,null,\"Quiz\"),v(c.I.Addon,null,v(c.v.Uncontrolled,null,v(c.e,{className:\"mr-2\"},\"Questions \",g.length),v(c.v.Toggle,{icon:!0,variant:\"text-secondary\"},v(p.a,{icon:u.lb})),v(c.v.Menu,{right:!0,animated:!0},g.map((function(e){return v(c.v.Item,{key:e.id,className:\"text-right\"},(n=e.question,t=70,n.slice(0,t)+(n.length>t?\"...\":\"\")),v(c.c,{circle:!0,onClick:function(){!function(e){k(\"question\",e.question),k(\"type\",e.type),k(\"id\",e.id),k(\"options\",e.options)}(e)}},v(p.a,{icon:u.V})),v(c.c,{circle:!0,onClick:function(){z(e.id)}},v(p.a,{icon:u.Ab})));var n,t})))))),v(c.I.Body,null,v(c.x,{onSubmit:j((function(e){var o=a.b.collection(\"runners\").doc(n);e.id?function(e,n,t){e.collection(\"questions\").doc(n.id).set({question:n.question,type:n.type,options:n.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return t()})).catch((function(e){O.fire({icon:\"error\",title:\"Creation question\"})}))}(o,e,(function(){return O.fire({icon:\"success\",title:\"Question saved successfully\"}),k(\"id\",null),y({pathwayId:t,type:\"edit_question\",msn:\"The  question created.\"}),I(),T()})):function(e,n,t){e.collection(\"questions\").add({question:n.question,type:n.type,options:n.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return t()})).catch((function(e){console.error(e),O.fire({icon:\"error\",title:\"Creation question\"})}))}(o,e,(function(){return O.fire({icon:\"success\",title:\"Question saved successfully\"}),y({pathwayId:t,type:\"new_question\",msn:\"The  question updated.\"}),I(),T()}))}))},v(c.x.Group,null,v(c.w,null,v(s.a,{as:c.z,type:\"textarea\",id:\"question\",name:\"question\",control:_,invalid:Boolean(x.question),placeholder:\"Insert your question\"}),v(c.B,{for:\"question\"},\"Question\"),x.question&&v(c.x.Feedback,{children:x.question.message}))),v(c.x.Group,null,v(s.a,{as:c.t,type:\"select\",name:\"type\",id:\"type\",control:_,invalid:Boolean(x.type)},v(\"option\",{value:\"default\"},\"Select your type\"),v(\"option\",{value:\"multiple\"},\"Multiple\"),v(\"option\",{value:\"single\"},\"Single\"),v(\"option\",{value:\"yes_no\"},\"Yes/No\")),x.type&&v(c.x.Feedback,{children:x.type.message})),B.map((function(e,n){return v(c.L,{key:e.id,className:\"pt-4\"},v(c.q,{xs:\"11\"},v(c.x.Group,null,v(c.w,null,v(s.a,{as:c.z,defaultValue:e.name||\"\",type:\"textarea\",id:\"options_\".concat(n,\"_.name\"),name:\"options[\".concat(n,\"].name\"),control:_}),v(c.B,{for:\"options_\".concat(n,\"_.name\")},\"Option#\",n+1)))),v(c.q,{xs:\"1\"},v(c.g,{type:\"button\",onClick:function(){return S(n)}},v(p.a,{icon:u.Ab}))),v(c.q,{xs:\"12\"},v(c.x.Group,null,v(c.w,null,v(s.a,{name:\"options[\".concat(n,\"].isCorrect\"),control:_,render:function(t){var o=t.onChange,r=t.onBlur,i=t.value,a=(t.name,t.ref);return v(c.t,{type:\"checkbox\",id:\"options_\".concat(n,\"_.isCorrect\"),label:\"it's correct?\",onBlur:r,name:\"options[\".concat(n,\"].isCorrect\"),onChange:function(e){return o(e.target.checked)},checked:e.isCorrect||i,innerRef:a})}})))))})),v(\"p\",{className:\"text-right\"},v(c.g,{variant:Boolean(x.options)?\"danger\":\"primary\",type:\"button\",onClick:function(){E({})}},\"Add Option \",v(p.a,{icon:u.pb}))),x.options&&v(c.b,{variant:\"label-danger\"},x.options.message),v(s.a,{as:c.z,control:_,type:\"hidden\",name:\"id\",id:\"id\"}),v(c.I.Footer,{bordered:!0},v(c.g,{disabled:!f,variant:\"primary\"},\"Save and add\"),v(c.g,{type:\"button\",className:\"ml-2\",onClick:function(){h.a.back()}},\"Cancel\"))))))}},anCZ:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/runner/questions\",function(){return t(\"J355\")}])}},[[\"anCZ\",0,1,4,8,10,3,2,7,9,11]]]);","extractedComments":[]}