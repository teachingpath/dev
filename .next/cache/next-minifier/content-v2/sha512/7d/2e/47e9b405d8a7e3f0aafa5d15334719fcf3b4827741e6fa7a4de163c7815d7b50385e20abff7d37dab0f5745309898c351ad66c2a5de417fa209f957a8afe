{"code":"_N_E=(this.webpackJsonp_N_E=this.webpackJsonp_N_E||[]).push([[70],{\"5xTo\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),a=n(\"1OyB\"),o=n(\"vuIU\"),i=n(\"JX7q\"),c=n(\"Ji7U\"),s=n(\"md7G\"),l=n(\"foSv\"),u=n(\"q1tI\"),d=n.n(u),p=n(\"jwaz\"),f=n(\"N1Wf\"),h=n(\"0ci1\"),v=n(\"ANjH\"),y=n(\"/MKj\"),m=n(\"tCCL\"),b=n(\"qGWM\"),O=n(\"8Kt/\"),w=n.n(O),g=n(\"IP2g\"),j=n(\"wHSu\"),P=n(\"nOHt\"),I=n.n(P),x=n(\"sXnO\"),E=n(\"2BYM\"),B=n.n(E),C=n(\"8/9Z\"),k=n(\"tclJ\"),S=n(\"hUEd\"),q=n(\"tx4t\"),T=d.a.createElement;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var z=B()(x.a),G=z.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",z.stopTimer),e.addEventListener(\"mouseleave\",z.resumeTimer)}}),R=function(e){Object(c.a)(n,e);var t=N(n);function n(e){var r;return Object(a.a)(this,n),r=t.call(this,e),I.a.query.pathwayId?(r.state={id:I.a.query.pathwayId,saved:!1},r.onEdit=r.onEdit.bind(Object(i.a)(r))):I.a.push(\"/pathway/create\"),r}return Object(o.a)(n,[{key:\"componentDidMount\",value:function(){var e=this;this.props.pageChangeHeaderTitle(\"Update Pathway\"),this.props.breadcrumbChange([{text:\"Pathway\",link:\"/\"},{text:\"Update\"}]),f.b.collection(\"pathways\").doc(this.state.id).get().then((function(t){t.exists?e.setState(L({id:e.state.id,saved:!0},t.data())):console.log(\"No such document!\")})).catch((function(e){console.log(\"Error getting documents: \",e),G.fire({icon:\"error\",title:\"Getting a pathway\"})}))}},{key:\"onEdit\",value:function(e){var t=this;f.b.collection(\"pathways\").doc(this.state.id).update(L({},e)).then((function(n){t.setState(L({id:t.state.id,saved:!0},e)),G.fire({icon:\"success\",title:\"Pathway updated successfully\"}),t.props.activityChange(L({pathwayId:t.state.id,type:\"edit_pathway\",msn:'The \"'+e.name+'\" pathway was changed.'},e))})).catch((function(e){console.error(\"Error adding document: \",e),G.fire({icon:\"error\",title:\"Creation pathway\"})}))}},{key:\"render\",value:function(){var e=this;return this.state.saved?T(d.a.Fragment,null,T(w.a,null,T(\"title\",null,\"Pathway | Edit\")),T(p.s,{fluid:!0},T(p.L,null,T(p.q,{md:\"6\"},T(p.I,null,T(p.I.Header,{bordered:!0},T(p.I.Title,null,\"Pathway | Edit\")),T(p.I.Body,null,T(S.default,{onSave:this.onEdit,pathwayId:this.state.id,saved:this.state.saved,data:this.state})))),T(p.q,{md:\"6\"},T(p.I,null,T(p.I.Header,{bordered:!0},T(p.I.Title,null,\"Trophy\")),T(p.I.Body,null,T(k.default,{activityChange:this.props.activityChange,pathwayId:this.state.id,data:this.state.trophy,saved:this.state.saved})))),T(p.q,{md:\"12\"},T(p.I,null,T(p.I.Header,{bordered:!0},T(p.I.Title,null,\"Runners\")),T(p.I.Body,null,T(C.default,{pathwayId:this.state.id})),T(p.I.Footer,null,T(p.g,{type:\"button\",disabled:!this.state.saved,onClick:function(){I.a.push({pathname:\"/runner/create\",query:{pathwayId:e.state.id}})}},\"Add Runner\",T(g.a,{className:\"ml-2\",icon:j.pb})))))))):T(q.a,null,\"Loading\")}}]),n}(d.a.Component);t.default=Object(y.a)(null,(function(e){return Object(v.a)({pageChangeHeaderTitle:h.d,breadcrumbChange:h.b,activityChange:h.a},e)}))(Object(b.a)(Object(m.a)(R)))},\"8/9Z\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),a=n(\"1OyB\"),o=n(\"vuIU\"),i=n(\"JX7q\"),c=n(\"Ji7U\"),s=n(\"md7G\"),l=n(\"foSv\"),u=n(\"q1tI\"),d=n.n(u),p=n(\"jwaz\"),f=n(\"N1Wf\"),h=n(\"M4kO\"),v=n(\"wHSu\"),y=n(\"IP2g\"),m=n(\"nOHt\"),b=n.n(m),O=d.a.createElement;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var P=function(e){Object(c.a)(n,e);var t=j(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={data:e.data||[]},r.onSortList=r.onSortList.bind(Object(i.a)(r)),r}return Object(o.a)(n,[{key:\"componentDidMount\",value:function(){var e=this;f.b.collection(\"runners\").where(\"pathwayId\",\"==\",this.props.pathwayId).orderBy(\"level\").get().then((function(t){var n=[];t.forEach((function(e){n.push({id:e.id,title:e.data().name,subtitle:e.data().description})})),e.setState(g(g({},e.state),{},{data:n}))})).catch((function(e){console.log(\"Error getting documents: \",e)}))}},{key:\"onDelete\",value:function(e){var t=this;f.b.collection(\"runners\").doc(e).delete().then((function(){t.componentDidMount()})).catch((function(e){console.error(\"Error removing document: \",e)}))}},{key:\"onSortList\",value:function(e){e.forEach((function(e,t){f.b.collection(\"runners\").doc(e.id).update({level:t}).catch((function(e){console.error(\"Error removing document: \",e)}))})),this.setState({data:e})}},{key:\"shouldComponentUpdate\",value:function(e,t){var n,r;return(null===(n=this.props.item)||void 0===n?void 0:n.runnerId)!==(null===(r=e.item)||void 0===r?void 0:r.runnerId)&&this.componentDidMount(),!0}},{key:\"render\",value:function(){var e=this;return O(p.K,{bordered:!0,action:!0},O(h.ReactSortable,{list:this.state.data,setList:this.onSortList},this.state.data.map((function(t,n){var r=t.title,a=t.subtitle,o=t.id;return O(p.K.Item,{key:n,href:\"javascript:void(0)\"},O(p.K.Addon,{addonType:\"prepend\"},O(p.c,{display:!0},O(y.a,{icon:v.vb}))),O(p.K.Content,null,O(p.K.Title,null,r),O(p.K.Subtitle,null,a)),O(p.K.Addon,{addonType:\"append\"},O(p.v.Uncontrolled,null,O(p.v.Toggle,{icon:!0,variant:\"text-secondary\",href:\"javascript:void(0)\"},O(y.a,{icon:v.W})),O(p.v.Menu,{right:!0,animated:!0},O(p.v.Item,{href:\"javascript:void(0)\",onClick:function(){b.a.push({pathname:\"/runner/edit\",query:{runnerId:o,pathwayId:e.props.pathwayId}})},icon:O(y.a,{icon:v.V})},\"Editar\"),O(p.v.Item,{href:\"javascript:void(0)\",onClick:function(){e.onDelete(o)},icon:O(y.a,{icon:v.Bb})},\"Delete\"),O(p.v.Divider,null),O(p.v.Item,{href:\"javascript:void(0)\",onClick:function(){b.a.push({pathname:\"/runner/quiz\",query:{runnerId:o,pathwayId:e.props.pathwayId}})},icon:O(y.a,{icon:v.rb})},\"Add Quiz\"),O(p.v.Item,{href:\"javascript:void(0)\",onClick:function(){b.a.push({pathname:\"/track/create\",query:{runnerId:o,pathwayId:e.props.pathwayId}})},icon:O(y.a,{icon:v.lb})},\"Add Tracks\")))))}))))}}]),n}(d.a.Component);t.default=P},NPvn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/pathway/edit\",function(){return n(\"5xTo\")}])},hUEd:function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),a=n(\"q1tI\"),o=n.n(a),i=n(\"jwaz\"),c=n(\"NKCw\"),s=n(\"UGp+\"),l=n(\"NWhz\"),u=n(\"nOHt\"),d=n.n(u),p=n(\"RLfC\"),f=n.n(p),h=n(\"sXnO\"),v=n(\"2BYM\"),y=n.n(v),m=o.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=y()(h.a),g=w.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",w.stopTimer),e.addEventListener(\"mouseleave\",w.resumeTimer)}});t.default=function(e){var t,n=e.onSave,r=e.data,o=Object(a.useState)({preview:(null===r||void 0===r||null===(t=r.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),u=o[0],p=o[1],h=s.d().shape({name:s.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:s.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\")}),v=Object(c.e)({resolver:Object(l.a)(h),defaultValues:{name:(null===r||void 0===r?void 0:r.name)||\"\",description:(null===r||void 0===r?void 0:r.description)||\"\",tags:(null===r||void 0===r?void 0:r.tags)||\"\"}}),y=v.control,b=v.handleSubmit,w=v.errors;return m(i.x,{onSubmit:b((function(e){n(O(O({},e),{},{image:u}))}))},m(i.L,null,m(i.q,{xs:\"6\"},m(i.x.Group,null,m(f.a,{width:130,height:130,onCrop:function(e){p({preview:e})},onClose:function(){p({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(g.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:u.src,label:\"Pathway icon\"}))),m(i.q,{xs:\"6\"},m(i.x.Group,null,u.preview&&m(\"img\",{src:u.preview,alt:\"Preview\"}))),m(i.q,{xs:\"12\"},m(i.x.Group,null,m(i.w,null,m(c.a,{as:i.z,type:\"text\",id:\"name\",name:\"name\",control:y,invalid:Boolean(w.name),placeholder:\"Insert your name\"}),m(i.B,{for:\"name\"},\"Name\"),w.name&&m(i.x.Feedback,{children:w.name.message}))),m(i.x.Group,null,m(i.w,null,m(c.a,{as:i.z,type:\"textarea\",id:\"description\",name:\"description\",control:y,invalid:Boolean(w.description),placeholder:\"Insert your description\"}),m(i.B,{for:\"description\"},\"Description\"),w.description&&m(i.x.Feedback,{children:w.description.message}))),m(i.x.Group,null,m(i.w,null,m(c.a,{as:i.z,type:\"text\",id:\"tags\",name:\"tags\",control:y,placeholder:\"Insert your tags separated by commas\"}),m(i.B,{for:\"tags\"},\"Tags\"))))),m(i.g,{type:\"submit\",variant:\"primary\"},null===r||void 0===r?\"Create\":\"Update\"),m(i.g,{type:\"button\",className:\"ml-2\",onClick:function(){d.a.back()}},\"Cancel\"))}},tclJ:function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),a=n(\"q1tI\"),o=n.n(a),i=n(\"jwaz\"),c=n(\"N1Wf\"),s=n(\"NKCw\"),l=n(\"UGp+\"),u=n(\"NWhz\"),d=n(\"sXnO\"),p=n(\"2BYM\"),f=n.n(p),h=n(\"RLfC\"),v=n.n(h),y=o.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=f()(d.a),w=O.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",O.stopTimer),e.addEventListener(\"mouseleave\",O.resumeTimer)}});t.default=function(e){var t,n=e.pathwayId,r=e.saved,o=e.data,d=e.activityChange,p=Object(a.useState)({preview:(null===o||void 0===o||null===(t=o.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),f=p[0],h=p[1],m=l.d().shape({name:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\"),points:l.c().min(100,\"Please enter at least 10 points\").required(\"Please enter your points\")}),O=Object(s.e)({resolver:Object(u.a)(m),defaultValues:{name:(null===o||void 0===o?void 0:o.name)||\"\",description:(null===o||void 0===o?void 0:o.description)||\"\",points:(null===o||void 0===o?void 0:o.points)||100}}),g=O.control,j=O.handleSubmit,P=O.errors;return y(i.x,{onSubmit:j((function(e){!function(e){c.b.collection(\"pathways\").doc(n).update({trophy:b({},e)}).then((function(t){w.fire({icon:\"success\",title:\"Trophy saved successfully\"}),d({pathwayId:n,type:\"edit_pathway\",msn:'The \"'+e.name+'\" trophy was changed.'})})).catch((function(e){w.fire({icon:\"error\",title:\"Updating trophy\"})}))}(b(b({},e),{},{image:f}))}))},y(i.L,null,y(i.q,{xs:\"6\"},y(i.x.Group,null,y(v.a,{width:130,height:130,onCrop:function(e){h({preview:e})},onClose:function(){h({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(w.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:f.src,label:\"Trophy icon\"}))),y(i.q,{xs:\"6\"},y(i.x.Group,null,f.preview&&y(\"img\",{src:f.preview,alt:\"Preview\"}))),y(i.q,{xs:\"12\"},y(i.x.Group,null,y(i.w,null,y(s.a,{as:i.z,type:\"text\",id:\"trophy-name\",name:\"name\",control:g,invalid:Boolean(P.name),placeholder:\"Insert your name\"}),y(i.B,{for:\"trophy-name\"},\"Name\"),P.name&&y(i.x.Feedback,{children:P.name.message}))),y(i.x.Group,null,y(i.w,null,y(s.a,{as:i.z,type:\"textarea\",id:\"trophy-description\",name:\"description\",control:g,invalid:Boolean(P.description),placeholder:\"Insert your description\"}),y(i.B,{for:\"trophy-description\"},\"Description\"),P.description&&y(i.x.Feedback,{children:P.description.message}))),y(i.x.Group,null,y(i.w,null,y(s.a,{as:i.z,type:\"number\",id:\"trophy-points\",name:\"points\",control:g,invalid:Boolean(P.points),placeholder:\"Insert your points\"}),y(i.B,{for:\"trophy-points\"},\"Points\"),P.points&&y(i.x.Feedback,{children:P.points.message}))))),y(i.g,{type:\"submit\",variant:\"primary\",disabled:!r},null===o||void 0===o?\"Add\":\"Update\"))}}},[[\"NPvn\",0,1,4,8,10,3,2,5,6,7,9,11,12,13]]]);","extractedComments":[]}