{"code":"_N_E=(this.webpackJsonp_N_E=this.webpackJsonp_N_E||[]).push([[69],{QfsY:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"1OyB\"),o=r(\"vuIU\"),i=r(\"JX7q\"),s=r(\"Ji7U\"),c=r(\"md7G\"),l=r(\"foSv\"),u=r(\"q1tI\"),p=r.n(u),d=r(\"jwaz\"),h=r(\"N1Wf\"),f=r(\"0ci1\"),m=r(\"ANjH\"),y=r(\"/MKj\"),v=r(\"tCCL\"),b=r(\"qGWM\"),w=r(\"8Kt/\"),O=r.n(w),g=r(\"IP2g\"),x=r(\"wHSu\"),j=r(\"nOHt\"),P=r.n(j),C=r(\"wp5G\"),B=r(\"sXnO\"),I=r(\"2BYM\"),E=r.n(I),T=r(\"tclJ\"),q=r(\"hUEd\"),k=p.a.createElement;function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var G=E()(B.a),L=G.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",G.stopTimer),e.addEventListener(\"mouseleave\",G.resumeTimer)}}),_=function(e){Object(s.a)(r,e);var t=N(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={id:Object(C.a)(),saved:!1},n.onCreate=n.onCreate.bind(Object(i.a)(n)),n}return Object(o.a)(r,[{key:\"componentDidMount\",value:function(){this.props.pageChangeHeaderTitle(\"Create Pathway\"),this.props.breadcrumbChange([{text:\"Pathway\",link:\"/\"},{text:\"Create\"}])}},{key:\"onCreate\",value:function(e){var t=this,r=h.a.auth().currentUser;h.b.collection(\"pathways\").doc(this.state.id).set(D(D({},e),{},{draft:!0,leaderId:r.uid,date:new Date})).then((function(){t.setState(D({id:t.state.id,saved:!0},e)),L.fire({icon:\"success\",title:\"Pathway saved successfully\"}),t.props.activityChange(D({pathwayId:t.state.id,type:\"new_pathway\",msn:'The \"'+e.name+'\" pathway was created.'},e))})).catch((function(e){console.error(\"Error adding document: \",e),L.fire({icon:\"error\",title:\"Creation pathway\"})}))}},{key:\"render\",value:function(){var e=this;return k(p.a.Fragment,null,k(O.a,null,k(\"title\",null,\"Pathway | Create\")),k(d.s,{fluid:!0},k(d.L,null,k(d.q,{md:\"6\"},k(d.I,null,k(d.I.Header,{bordered:!0},k(d.I.Title,null,\"Pathway | Create\")),k(d.I.Body,null,k(\"p\",null,\"After creating the Pathway you must create the runners to add the tracks.\"),k(\"hr\",null),k(q.default,{onSave:this.onCreate,pathwayId:this.state.id})),k(d.I.Footer,null,k(d.g,{type:\"button\",disabled:!this.state.saved,className:\"float-right\",onClick:function(){P.a.push({pathname:\"/runner/create\",query:{pathwayId:e.state.id}})}},\"Add Runner\",k(g.a,{className:\"ml-2\",icon:x.pb}))))),k(d.q,{md:\"6\"},k(d.I,null,k(d.I.Header,{bordered:!0},k(d.I.Title,null,\"Trophy\")),k(d.I.Body,null,k(\"p\",null,\"This is the trophy that goes to the end of the pathway.\"),k(\"hr\",null),k(T.default,{activityChange:this.props.activityChange,pathwayId:this.state.id,saved:this.state.saved})))))))}}]),r}(p.a.Component);t.default=Object(y.a)(null,(function(e){return Object(m.a)({pageChangeHeaderTitle:f.d,breadcrumbChange:f.b,activityChange:f.a},e)}))(Object(b.a)(Object(v.a)(_)))},bFEx:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/pathway/create\",function(){return r(\"QfsY\")}])},hUEd:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"q1tI\"),o=r.n(a),i=r(\"jwaz\"),s=r(\"NKCw\"),c=r(\"UGp+\"),l=r(\"NWhz\"),u=r(\"nOHt\"),p=r.n(u),d=r(\"RLfC\"),h=r.n(d),f=r(\"sXnO\"),m=r(\"2BYM\"),y=r.n(m),v=o.a.createElement;function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=y()(f.a),g=O.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",O.stopTimer),e.addEventListener(\"mouseleave\",O.resumeTimer)}});t.default=function(e){var t,r=e.onSave,n=e.data,o=Object(a.useState)({preview:(null===n||void 0===n||null===(t=n.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),u=o[0],d=o[1],f=c.d().shape({name:c.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:c.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\")}),m=Object(s.e)({resolver:Object(l.a)(f),defaultValues:{name:(null===n||void 0===n?void 0:n.name)||\"\",description:(null===n||void 0===n?void 0:n.description)||\"\",tags:(null===n||void 0===n?void 0:n.tags)||\"\"}}),y=m.control,b=m.handleSubmit,O=m.errors;return v(i.x,{onSubmit:b((function(e){r(w(w({},e),{},{image:u}))}))},v(i.L,null,v(i.q,{xs:\"6\"},v(i.x.Group,null,v(h.a,{width:130,height:130,onCrop:function(e){d({preview:e})},onClose:function(){d({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(g.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:u.src,label:\"Pathway icon\"}))),v(i.q,{xs:\"6\"},v(i.x.Group,null,u.preview&&v(\"img\",{src:u.preview,alt:\"Preview\"}))),v(i.q,{xs:\"12\"},v(i.x.Group,null,v(i.w,null,v(s.a,{as:i.z,type:\"text\",id:\"name\",name:\"name\",control:y,invalid:Boolean(O.name),placeholder:\"Insert your name\"}),v(i.B,{for:\"name\"},\"Name\"),O.name&&v(i.x.Feedback,{children:O.name.message}))),v(i.x.Group,null,v(i.w,null,v(s.a,{as:i.z,type:\"textarea\",id:\"description\",name:\"description\",control:y,invalid:Boolean(O.description),placeholder:\"Insert your description\"}),v(i.B,{for:\"description\"},\"Description\"),O.description&&v(i.x.Feedback,{children:O.description.message}))),v(i.x.Group,null,v(i.w,null,v(s.a,{as:i.z,type:\"text\",id:\"tags\",name:\"tags\",control:y,placeholder:\"Insert your tags separated by commas\"}),v(i.B,{for:\"tags\"},\"Tags\"))))),v(i.g,{type:\"submit\",variant:\"primary\"},null===n||void 0===n?\"Create\":\"Update\"),v(i.g,{type:\"button\",className:\"ml-2\",onClick:function(){p.a.back()}},\"Cancel\"))}},tclJ:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"q1tI\"),o=r.n(a),i=r(\"jwaz\"),s=r(\"N1Wf\"),c=r(\"NKCw\"),l=r(\"UGp+\"),u=r(\"NWhz\"),p=r(\"sXnO\"),d=r(\"2BYM\"),h=r.n(d),f=r(\"RLfC\"),m=r.n(f),y=o.a.createElement;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=h()(p.a),O=w.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",w.stopTimer),e.addEventListener(\"mouseleave\",w.resumeTimer)}});t.default=function(e){var t,r=e.pathwayId,n=e.saved,o=e.data,p=e.activityChange,d=Object(a.useState)({preview:(null===o||void 0===o||null===(t=o.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),h=d[0],f=d[1],v=l.d().shape({name:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\"),points:l.c().min(100,\"Please enter at least 10 points\").required(\"Please enter your points\")}),w=Object(c.e)({resolver:Object(u.a)(v),defaultValues:{name:(null===o||void 0===o?void 0:o.name)||\"\",description:(null===o||void 0===o?void 0:o.description)||\"\",points:(null===o||void 0===o?void 0:o.points)||100}}),g=w.control,x=w.handleSubmit,j=w.errors;return y(i.x,{onSubmit:x((function(e){!function(e){s.b.collection(\"pathways\").doc(r).update({trophy:b({},e)}).then((function(t){O.fire({icon:\"success\",title:\"Trophy saved successfully\"}),p({pathwayId:r,type:\"edit_pathway\",msn:'The \"'+e.name+'\" trophy was changed.'})})).catch((function(e){O.fire({icon:\"error\",title:\"Updating trophy\"})}))}(b(b({},e),{},{image:h}))}))},y(i.L,null,y(i.q,{xs:\"6\"},y(i.x.Group,null,y(m.a,{width:130,height:130,onCrop:function(e){f({preview:e})},onClose:function(){f({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(O.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:h.src,label:\"Trophy icon\"}))),y(i.q,{xs:\"6\"},y(i.x.Group,null,h.preview&&y(\"img\",{src:h.preview,alt:\"Preview\"}))),y(i.q,{xs:\"12\"},y(i.x.Group,null,y(i.w,null,y(c.a,{as:i.z,type:\"text\",id:\"trophy-name\",name:\"name\",control:g,invalid:Boolean(j.name),placeholder:\"Insert your name\"}),y(i.B,{for:\"trophy-name\"},\"Name\"),j.name&&y(i.x.Feedback,{children:j.name.message}))),y(i.x.Group,null,y(i.w,null,y(c.a,{as:i.z,type:\"textarea\",id:\"trophy-description\",name:\"description\",control:g,invalid:Boolean(j.description),placeholder:\"Insert your description\"}),y(i.B,{for:\"trophy-description\"},\"Description\"),j.description&&y(i.x.Feedback,{children:j.description.message}))),y(i.x.Group,null,y(i.w,null,y(c.a,{as:i.z,type:\"number\",id:\"trophy-points\",name:\"points\",control:g,invalid:Boolean(j.points),placeholder:\"Insert your points\"}),y(i.B,{for:\"trophy-points\"},\"Points\"),j.points&&y(i.x.Feedback,{children:j.points.message}))))),y(i.g,{type:\"submit\",variant:\"primary\",disabled:!n},null===o||void 0===o?\"Add\":\"Update\"))}},wp5G:function(e,t,r){\"use strict\";t.a=function(){var e=(new Date).getTime();return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?r:3&r|8).toString(16)}))}}},[[\"bFEx\",0,1,4,8,10,3,2,5,6,7,9,11,12]]]);","extractedComments":[]}