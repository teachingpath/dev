{"code":"_N_E=(this.webpackJsonp_N_E=this.webpackJsonp_N_E||[]).push([[88],{hmaV:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/track/edit\",function(){return r(\"rJNG\")}])},qGWM:function(t,e,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),c=r(\"rePB\"),o=r(\"HaE+\"),i=r(\"1OyB\"),u=r(\"vuIU\"),s=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),p=r(\"q1tI\"),d=r.n(p),h=r(\"ANjH\"),b=r(\"0ci1\"),y=r(\"/MKj\"),O=r(\"qP+2\"),j=r(\"nOHt\"),v=r.n(j),g=r(\"s6m4\"),m=d.a.createElement;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){Object(c.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(f.a)(t);if(e){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}e.a=function(t){var e=function(e){Object(s.a)(n,e);var r=P(n);function n(){return Object(i.a)(this,n),r.apply(this,arguments)}return Object(u.a)(n,[{key:\"componentDidMount\",value:function(){this.props.firebaseChange(this.props.firebase)}},{key:\"render\",value:function(){return m(t,this.props)}}],[{key:\"getInitialProps\",value:function(){var e=Object(o.a)(a.a.mark((function e(r){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!t.getInitialProps){e.next=5;break}return e.next=4,t.getInitialProps(r);case 4:n=e.sent;case 5:return e.next=7,Object(O.a)(r);case 7:if(c=e.sent){e.next=11;break}return r.res?(r.res.writeHead(302,{Location:g.a.loginPagePath}),r.res.end()):v.a.push(g.a.loginPagePath),e.abrupt(\"return\",k(k({},n),{},{firebase:null}));case 11:return e.abrupt(\"return\",k(k({},n),{},{firebase:c}));case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.a.Component);return Object(y.b)(null,(function(t){return Object(h.bindActionCreators)({firebaseChange:b.d},t)}))(e)}},rJNG:function(t,e,r){\"use strict\";r.r(e);var n=r(\"rePB\"),a=r(\"1OyB\"),c=r(\"vuIU\"),o=r(\"JX7q\"),i=r(\"Ji7U\"),u=r(\"md7G\"),s=r(\"foSv\"),l=r(\"q1tI\"),f=r.n(l),p=r(\"jwaz\"),d=r(\"N1Wf\"),h=r(\"0ci1\"),b=r(\"ANjH\"),y=r(\"/MKj\"),O=r(\"tCCL\"),j=r(\"qGWM\"),v=r(\"8Kt/\"),g=r.n(v),m=r(\"nOHt\"),w=r.n(m),k=r(\"sXnO\"),P=r(\"2BYM\"),I=r.n(P),E=r(\"rrmv\"),C=r(\"tx4t\"),N=f.a.createElement;function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(s.a)(t);if(e){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var B=I()(k.a),D=B.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(t){t.addEventListener(\"mouseenter\",B.stopTimer),t.addEventListener(\"mouseleave\",B.resumeTimer)}}),T=function(t){Object(i.a)(r,t);var e=q(r);function r(t){var n;return Object(a.a)(this,r),n=e.call(this,t),w.a.query.runnerId&&w.a.query.trackId?(n.state={pathwayId:w.a.query.pathwayId,runnerId:w.a.query.runnerId,trackId:w.a.query.trackId,saved:!1},n.onEdit=n.onEdit.bind(Object(o.a)(n))):w.a.push(\"/pathway/create\"),n}return Object(c.a)(r,[{key:\"componentDidMount\",value:function(){this.props.pageChangeHeaderTitle(\"Update Pathway\"),this.props.breadcrumbChange([{text:\"Pathway\",link:\"/\"},{text:\"Runner\",link:\"/runner/create?pathwayId=\"+w.a.query.pathwayId},{text:\"Track\"}]),this.loadData()}},{key:\"loadData\",value:function(){var t=this;d.b.collection(\"runners\").doc(this.state.runnerId).collection(\"tracks\").doc(this.state.trackId).get().then((function(e){e.exists?t.setState(_({id:t.state.trackId,saved:!0},e.data())):console.log(\"No such document!\")})).catch((function(t){console.log(\"Error getting documents: \",t),D.fire({icon:\"error\",title:\"Getting a runner\"})}))}},{key:\"onEdit\",value:function(t){var e=this;return d.b.collection(\"runners\").doc(this.state.runnerId).collection(\"tracks\").doc(this.state.trackId).update(_({},t)).then((function(r){e.setState(_({pathwayId:e.state.pathwayId,runnerId:e.state.runnerId,trackId:e.state.trackId},t)),D.fire({icon:\"success\",title:\"Track saved successfully\"}),e.props.activityChange(_({pathwayId:e.state.pathwayId,type:\"edit_track\",msn:'The \"'+t.name+'\" track was updated.'},t))})).catch((function(t){console.error(\"Error adding document: \",t),D.fire({icon:\"error\",title:\"Update track\"})}))}},{key:\"render\",value:function(){return this.state.saved?N(f.a.Fragment,null,N(g.a,null,N(\"title\",null,\"Track | Edit\")),N(p.t,{fluid:!0},N(p.Q,null,N(p.r,{md:\"6\"},N(p.N,null,N(p.N.Header,{bordered:!0},N(p.N.Title,null,\"Track | Edit\")),N(p.N.Body,null,N(\"p\",null,\"After creating the Pathway you must create the runners to add the tracks.\"),N(\"hr\",null),N(E.default,{onSave:this.onEdit,data:this.state}))))))):N(C.a,null,\"Loading\")}}]),r}(f.a.Component);e.default=Object(y.b)(null,(function(t){return Object(b.bindActionCreators)({pageChangeHeaderTitle:h.e,breadcrumbChange:h.c,activityChange:h.a},t)}))(Object(j.a)(Object(O.a)(T)))}},[[\"hmaV\",0,1,3,9,11,2,4,5,6,7,8,10,12,18]]]);","extractedComments":[]}