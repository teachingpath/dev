{"code":"_N_E=(self.webpackJsonp_N_E=self.webpackJsonp_N_E||[]).push([[73],{QfsY:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"1OyB\"),o=r(\"vuIU\"),i=r(\"JX7q\"),c=r(\"Ji7U\"),s=r(\"md7G\"),u=r(\"foSv\"),l=r(\"q1tI\"),p=r.n(l),d=r(\"jwaz\"),f=r(\"N1Wf\"),h=r(\"0ci1\"),y=r(\"ANjH\"),b=r(\"/MKj\"),m=r(\"tCCL\"),v=r(\"qGWM\"),O=r(\"8Kt/\"),g=r.n(O),w=r(\"IP2g\"),j=r(\"wHSu\"),P=r(\"nOHt\"),x=r.n(P),C=r(\"wp5G\"),E=r(\"sXnO\"),B=r(\"2BYM\"),D=r.n(B),N=r(\"tclJ\"),k=r(\"hUEd\"),A=p.a.createElement;function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var G=D()(E.a),F=G.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",G.stopTimer),e.addEventListener(\"mouseleave\",G.resumeTimer)}}),q=function(e){Object(c.a)(r,e);var t=S(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).state={id:Object(C.a)(),saved:!1},n.onCreate=n.onCreate.bind(Object(i.a)(n)),n}return Object(o.a)(r,[{key:\"componentDidMount\",value:function(){this.props.pageChangeHeaderTitle(\"Create Pathway\"),this.props.breadcrumbChange([{text:\"Pathway\",link:\"/\"},{text:\"Create\"}])}},{key:\"onCreate\",value:function(e){var t=this,r=f.a.auth().currentUser;f.b.collection(\"pathways\").doc(this.state.id).set(T(T({},e),{},{draft:!0,leaderId:r.uid,date:new Date})).then((function(){t.setState(T({id:t.state.id,saved:!0},e)),F.fire({icon:\"success\",title:\"Pathway saved successfully\"}),t.props.activityChange(T({pathwayId:t.state.id,type:\"new_pathway\",msn:'The \"'+e.name+'\" pathway was created.'},e))})).catch((function(e){console.error(\"Error adding document: \",e),F.fire({icon:\"error\",title:\"Creation pathway\"})}))}},{key:\"render\",value:function(){var e=this;return A(p.a.Fragment,null,A(g.a,null,A(\"title\",null,\"Pathway | Create\")),A(d.t,{fluid:!0},A(d.Q,null,A(d.r,{md:\"6\"},A(d.N,null,A(d.N.Header,{bordered:!0},A(d.N.Title,null,\"Pathway | Create\")),A(d.N.Body,null,A(\"p\",null,\"After creating the Pathway you must create the runners to add the tracks.\"),A(\"hr\",null),A(k.default,{onSave:this.onCreate,pathwayId:this.state.id})),A(d.N.Footer,null,A(d.h,{type:\"button\",disabled:!this.state.saved,className:\"float-right\",onClick:function(){x.a.push({pathname:\"/runner/create\",query:{pathwayId:e.state.id}})}},\"Add Runner\",A(w.a,{className:\"ml-2\",icon:j.ub}))))),A(d.r,{md:\"6\"},A(d.N,null,A(d.N.Header,{bordered:!0},A(d.N.Title,null,\"Trophy\")),A(d.N.Body,null,A(\"p\",null,\"This is the trophy that goes to the end of the pathway.\"),A(\"hr\",null),A(N.default,{activityChange:this.props.activityChange,pathwayId:this.state.id,saved:this.state.saved})))))))}}]),r}(p.a.Component);t.default=Object(b.b)(null,(function(e){return Object(y.bindActionCreators)({pageChangeHeaderTitle:h.e,breadcrumbChange:h.c,activityChange:h.a},e)}))(Object(v.a)(Object(m.a)(q)))},bFEx:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/pathway/create\",function(){return r(\"QfsY\")}])},hUEd:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"q1tI\"),o=r.n(a),i=r(\"jwaz\"),c=r(\"NKCw\"),s=r(\"UGp+\"),u=r(\"NWhz\"),l=r(\"nOHt\"),p=r.n(l),d=r(\"RLfC\"),f=r.n(d),h=r(\"sXnO\"),y=r(\"2BYM\"),b=r.n(y),m=o.a.createElement;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=b()(h.a),w=g.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",g.stopTimer),e.addEventListener(\"mouseleave\",g.resumeTimer)}});t.default=function(e){var t,r=e.onSave,n=e.data,o=Object(a.useState)({preview:(null===n||void 0===n||null===(t=n.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),l=o[0],d=o[1],h=s.d().shape({name:s.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:s.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\")}),y=Object(c.e)({resolver:Object(u.a)(h),defaultValues:{name:(null===n||void 0===n?void 0:n.name)||\"\",description:(null===n||void 0===n?void 0:n.description)||\"\",tags:(null===n||void 0===n?void 0:n.tags)||\"\"}}),b=y.control,v=y.handleSubmit,g=y.errors;return m(i.A,{onSubmit:v((function(e){r(O(O({},e),{},{image:l}))}))},m(i.Q,null,m(i.r,{xs:\"6\"},m(i.A.Group,null,m(f.a,{width:130,height:130,onCrop:function(e){d({preview:e})},onClose:function(){d({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(w.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:l.src,label:\"Pathway icon\"}))),m(i.r,{xs:\"6\"},m(i.A.Group,null,l.preview&&m(\"img\",{src:l.preview,alt:\"Preview\"}))),m(i.r,{xs:\"12\"},m(i.A.Group,null,m(i.y,null,m(c.a,{as:i.D,type:\"text\",id:\"name\",name:\"name\",control:b,invalid:Boolean(g.name),placeholder:\"Insert your name\"}),m(i.F,{for:\"name\"},\"Name\"),g.name&&m(i.A.Feedback,{children:g.name.message}))),m(i.A.Group,null,m(i.y,null,m(c.a,{as:i.D,type:\"textarea\",id:\"description\",name:\"description\",control:b,invalid:Boolean(g.description),placeholder:\"Insert your description\"}),m(i.F,{for:\"description\"},\"Description\"),g.description&&m(i.A.Feedback,{children:g.description.message}))),m(i.A.Group,null,m(i.y,null,m(c.a,{as:i.D,type:\"text\",id:\"tags\",name:\"tags\",control:b,placeholder:\"Insert your tags separated by commas\"}),m(i.F,{for:\"tags\"},\"Tags\"))))),m(i.h,{type:\"submit\",variant:\"primary\"},null===n||void 0===n?\"Create\":\"Update\"),m(i.h,{type:\"button\",className:\"ml-2\",onClick:function(){p.a.back()}},\"Cancel\"))}},qGWM:function(e,t,r){\"use strict\";var n=r(\"o0o1\"),a=r.n(n),o=r(\"rePB\"),i=r(\"HaE+\"),c=r(\"1OyB\"),s=r(\"vuIU\"),u=r(\"Ji7U\"),l=r(\"md7G\"),p=r(\"foSv\"),d=r(\"q1tI\"),f=r.n(d),h=r(\"ANjH\"),y=r(\"0ci1\"),b=r(\"/MKj\"),m=r(\"qP+2\"),v=r(\"nOHt\"),O=r.n(v),g=r(\"s6m4\"),w=f.a.createElement;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(p.a)(e);if(t){var a=Object(p.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}t.a=function(e){var t=function(t){Object(u.a)(n,t);var r=x(n);function n(){return Object(c.a)(this,n),r.apply(this,arguments)}return Object(s.a)(n,[{key:\"componentDidMount\",value:function(){this.props.firebaseChange(this.props.firebase)}},{key:\"render\",value:function(){return w(e,this.props)}}],[{key:\"getInitialProps\",value:function(){var t=Object(i.a)(a.a.mark((function t(r){var n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},!e.getInitialProps){t.next=5;break}return t.next=4,e.getInitialProps(r);case 4:n=t.sent;case 5:return t.next=7,Object(m.a)(r);case 7:if(o=t.sent){t.next=11;break}return r.res?(r.res.writeHead(302,{Location:g.a.loginPagePath}),r.res.end()):O.a.push(g.a.loginPagePath),t.abrupt(\"return\",P(P({},n),{},{firebase:null}));case 11:return t.abrupt(\"return\",P(P({},n),{},{firebase:o}));case 12:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),n}(f.a.Component);return Object(b.b)(null,(function(e){return Object(h.bindActionCreators)({firebaseChange:y.d},e)}))(t)}},tclJ:function(e,t,r){\"use strict\";r.r(t);var n=r(\"rePB\"),a=r(\"q1tI\"),o=r.n(a),i=r(\"jwaz\"),c=r(\"N1Wf\"),s=r(\"NKCw\"),u=r(\"UGp+\"),l=r(\"NWhz\"),p=r(\"sXnO\"),d=r(\"2BYM\"),f=r.n(d),h=r(\"RLfC\"),y=r.n(h),b=o.a.createElement;function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=f()(p.a),g=O.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",O.stopTimer),e.addEventListener(\"mouseleave\",O.resumeTimer)}});t.default=function(e){var t,r=e.pathwayId,n=e.saved,o=e.data,p=e.activityChange,d=Object(a.useState)({preview:(null===o||void 0===o||null===(t=o.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),f=d[0],h=d[1],m=u.d().shape({name:u.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:u.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\"),points:u.c().min(100,\"Please enter at least 10 points\").required(\"Please enter your points\")}),O=Object(s.e)({resolver:Object(l.a)(m),defaultValues:{name:(null===o||void 0===o?void 0:o.name)||\"\",description:(null===o||void 0===o?void 0:o.description)||\"\",points:(null===o||void 0===o?void 0:o.points)||100}}),w=O.control,j=O.handleSubmit,P=O.errors;return b(i.A,{onSubmit:j((function(e){!function(e){c.b.collection(\"pathways\").doc(r).update({trophy:v({},e)}).then((function(t){g.fire({icon:\"success\",title:\"Trophy saved successfully\"}),p({pathwayId:r,type:\"edit_pathway\",msn:'The \"'+e.name+'\" trophy was changed.'})})).catch((function(e){g.fire({icon:\"error\",title:\"Updating trophy\"})}))}(v(v({},e),{},{image:f}))}))},b(i.Q,null,b(i.r,{xs:\"6\"},b(i.A.Group,null,b(y.a,{width:130,height:130,onCrop:function(e){h({preview:e})},onClose:function(){h({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(g.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:f.src,label:\"Trophy icon\"}))),b(i.r,{xs:\"6\"},b(i.A.Group,null,f.preview&&b(\"img\",{src:f.preview,alt:\"Preview\"}))),b(i.r,{xs:\"12\"},b(i.A.Group,null,b(i.y,null,b(s.a,{as:i.D,type:\"text\",id:\"trophy-name\",name:\"name\",control:w,invalid:Boolean(P.name),placeholder:\"Insert your name\"}),b(i.F,{for:\"trophy-name\"},\"Name\"),P.name&&b(i.A.Feedback,{children:P.name.message}))),b(i.A.Group,null,b(i.y,null,b(s.a,{as:i.D,type:\"textarea\",id:\"trophy-description\",name:\"description\",control:w,invalid:Boolean(P.description),placeholder:\"Insert your description\"}),b(i.F,{for:\"trophy-description\"},\"Description\"),P.description&&b(i.A.Feedback,{children:P.description.message}))),b(i.A.Group,null,b(i.y,null,b(s.a,{as:i.D,type:\"number\",id:\"trophy-points\",name:\"points\",control:w,invalid:Boolean(P.points),placeholder:\"Insert your points\"}),b(i.F,{for:\"trophy-points\"},\"Points\"),P.points&&b(i.A.Feedback,{children:P.points.message}))))),b(i.h,{type:\"submit\",variant:\"primary\",disabled:!n},null===o||void 0===o?\"Add\":\"Update\"))}},wp5G:function(e,t,r){\"use strict\";t.a=function(){var e=(new Date).getTime();return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?r:3&r|8).toString(16)}))}}},[[\"bFEx\",0,1,3,9,11,2,4,5,6,7,8,10,12,13]]]);","extractedComments":[]}