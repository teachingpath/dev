{"code":"_N_E=(this.webpackJsonp_N_E=this.webpackJsonp_N_E||[]).push([[80],{Fn2i:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/runner/quiz\",function(){return n(\"oKyk\")}])},J355:function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),o=n(\"q1tI\"),i=n.n(o),a=n(\"jwaz\"),s=n(\"N1Wf\"),c=n(\"wHSu\"),u=n(\"NKCw\"),l=n(\"UGp+\"),d=n(\"IP2g\"),p=n(\"NWhz\"),f=n(\"sXnO\"),h=n(\"2BYM\"),y=n.n(h),m=n(\"nOHt\"),b=n.n(m),v=i.a.createElement;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=y()(f.a),w=O.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",O.stopTimer),e.addEventListener(\"mouseleave\",O.resumeTimer)}});t.default=function(e){var t=e.runnerId,n=e.pathwayId,f=e.saved,h=e.data,y=e.activityChange,m=Object(o.useState)(h),O=m[0],j=m[1],q=l.d().shape({question:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your question\"),type:l.f().required(\"Please enter your type\"),options:l.a().min(2,\"Please enter at least 2 options\").required(\"Please enter your options\")}),I=Object(u.e)({resolver:Object(p.a)(q),defaultValues:{question:\"\",type:\"\",options:[]}}),P=I.control,C=I.handleSubmit,x=I.errors,B=I.setValue,k=I.reset,E=Object(u.d)({control:P,name:\"options\"}),_=E.fields,N=E.append,T=E.remove,S=function(){return s.b.collection(\"runners\").doc(t).collection(\"questions\").get().then((function(e){var t=[];e.forEach((function(e){t.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data()))})),j(t)}))},z=function(e){!function(e,t,n){e.collection(\"questions\").doc(t).delete().then((function(){return n()})).catch((function(e){console.error(\"Error removing document: \",e)}))}(s.b.collection(\"runners\").doc(t),e,(function(){return y({pathwayId:n,type:\"delete_question\",msn:\"The question deleted.\"}),S()}))};return v(i.a.Fragment,null,v(a.I,null,v(a.I.Header,{bordered:!0},v(a.I.Icon,null,v(d.a,{icon:c.rb})),v(a.I.Title,null,\"Quiz\"),v(a.I.Addon,null,v(a.v.Uncontrolled,null,v(a.e,{className:\"mr-2\"},\"Questions \",O.length),v(a.v.Toggle,{icon:!0,variant:\"text-secondary\"},v(d.a,{icon:c.lb})),v(a.v.Menu,{right:!0,animated:!0},O.map((function(e){return v(a.v.Item,{key:e.id,className:\"text-right\"},(t=e.question,n=70,t.slice(0,n)+(t.length>n?\"...\":\"\")),v(a.c,{circle:!0,onClick:function(){!function(e){B(\"question\",e.question),B(\"type\",e.type),B(\"id\",e.id),B(\"options\",e.options)}(e)}},v(d.a,{icon:c.V})),v(a.c,{circle:!0,onClick:function(){z(e.id)}},v(d.a,{icon:c.Ab})));var t,n})))))),v(a.I.Body,null,v(a.x,{onSubmit:C((function(e){var r=s.b.collection(\"runners\").doc(t);e.id?function(e,t,n){e.collection(\"questions\").doc(t.id).set({question:t.question,type:t.type,options:t.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return n()})).catch((function(e){w.fire({icon:\"error\",title:\"Creation question\"})}))}(r,e,(function(){return w.fire({icon:\"success\",title:\"Question saved successfully\"}),B(\"id\",null),y({pathwayId:n,type:\"edit_question\",msn:\"The  question created.\"}),k(),S()})):function(e,t,n){e.collection(\"questions\").add({question:t.question,type:t.type,options:t.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return n()})).catch((function(e){console.error(e),w.fire({icon:\"error\",title:\"Creation question\"})}))}(r,e,(function(){return w.fire({icon:\"success\",title:\"Question saved successfully\"}),y({pathwayId:n,type:\"new_question\",msn:\"The  question updated.\"}),k(),S()}))}))},v(a.x.Group,null,v(a.w,null,v(u.a,{as:a.z,type:\"textarea\",id:\"question\",name:\"question\",control:P,invalid:Boolean(x.question),placeholder:\"Insert your question\"}),v(a.B,{for:\"question\"},\"Question\"),x.question&&v(a.x.Feedback,{children:x.question.message}))),v(a.x.Group,null,v(u.a,{as:a.t,type:\"select\",name:\"type\",id:\"type\",control:P,invalid:Boolean(x.type)},v(\"option\",{value:\"default\"},\"Select your type\"),v(\"option\",{value:\"multiple\"},\"Multiple\"),v(\"option\",{value:\"single\"},\"Single\"),v(\"option\",{value:\"yes_no\"},\"Yes/No\")),x.type&&v(a.x.Feedback,{children:x.type.message})),_.map((function(e,t){return v(a.L,{key:e.id,className:\"pt-4\"},v(a.q,{xs:\"11\"},v(a.x.Group,null,v(a.w,null,v(u.a,{as:a.z,defaultValue:e.name||\"\",type:\"textarea\",id:\"options_\".concat(t,\"_.name\"),name:\"options[\".concat(t,\"].name\"),control:P}),v(a.B,{for:\"options_\".concat(t,\"_.name\")},\"Option#\",t+1)))),v(a.q,{xs:\"1\"},v(a.g,{type:\"button\",onClick:function(){return T(t)}},v(d.a,{icon:c.Ab}))),v(a.q,{xs:\"12\"},v(a.x.Group,null,v(a.w,null,v(u.a,{name:\"options[\".concat(t,\"].isCorrect\"),control:P,render:function(n){var r=n.onChange,o=n.onBlur,i=n.value,s=(n.name,n.ref);return v(a.t,{type:\"checkbox\",id:\"options_\".concat(t,\"_.isCorrect\"),label:\"it's correct?\",onBlur:o,name:\"options[\".concat(t,\"].isCorrect\"),onChange:function(e){return r(e.target.checked)},checked:e.isCorrect||i,innerRef:s})}})))))})),v(\"p\",{className:\"text-right\"},v(a.g,{variant:Boolean(x.options)?\"danger\":\"primary\",type:\"button\",onClick:function(){N({})}},\"Add Option \",v(d.a,{icon:c.pb}))),x.options&&v(a.b,{variant:\"label-danger\"},x.options.message),v(u.a,{as:a.z,control:P,type:\"hidden\",name:\"id\",id:\"id\"}),v(a.I.Footer,{bordered:!0},v(a.g,{disabled:!f,variant:\"primary\"},\"Save and add\"),v(a.g,{type:\"button\",className:\"ml-2\",onClick:function(){b.a.back()}},\"Cancel\"))))))}},\"RQ+B\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),o=n(\"q1tI\"),i=n.n(o),a=n(\"jwaz\"),s=n(\"N1Wf\"),c=n(\"NKCw\"),u=n(\"UGp+\"),l=n(\"NWhz\"),d=n(\"sXnO\"),p=n(\"2BYM\"),f=n.n(p),h=n(\"RLfC\"),y=n.n(h),m=i.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=f()(d.a),O=g.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",g.stopTimer),e.addEventListener(\"mouseleave\",g.resumeTimer)}});t.default=function(e){var t,n=e.runnerId,r=e.saved,i=e.data,d=e.activityChange,p=e.pathwayId,f=i.badget,h=Object(o.useState)({preview:(null===f||void 0===f||null===(t=f.image)||void 0===t?void 0:t.preview)||\"\",src:\"\"}),b=h[0],g=h[1],w=u.d().shape({name:u.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your name\"),description:u.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your description\"),points:u.c().min(10,\"Please enter at least 10 points\").required(\"Please enter your points\")}),j=Object(c.e)({resolver:Object(l.a)(w),defaultValues:{name:(null===f||void 0===f?void 0:f.name)||\"\",description:(null===f||void 0===f?void 0:f.description)||\"\",points:(null===f||void 0===f?void 0:f.points)||10}}),q=j.control,I=j.handleSubmit,P=j.errors;return m(a.x,{onSubmit:I((function(e){!function(e){s.b.collection(\"runners\").doc(n).update({badget:v({},e)}).then((function(t){O.fire({icon:\"success\",title:\"Badget saved successfully\"}),d({pathwayId:p,type:\"edit_runner\",msn:'The \"'+e.name+'\" badget was changed.'})})).catch((function(e){O.fire({icon:\"error\",title:\"Creation badget\"})}))}(v(v({},e),{},{image:b}))}))},m(a.L,null,m(a.q,{xs:\"6\"},m(a.x.Group,null,m(y.a,{width:130,height:130,onCrop:function(e){g({preview:e})},onClose:function(){g({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(O.fire({icon:\"error\",title:\"The image is very large\"}),e.target.value=\"\")},src:b.src,label:\"Badget icon\"}))),m(a.q,{xs:\"6\"},m(a.x.Group,null,b.preview&&m(\"img\",{src:b.preview,alt:\"Preview\"}))),m(a.q,{xs:\"12\"},m(a.x.Group,null,m(a.w,null,m(c.a,{as:a.z,type:\"text\",id:\"badget-name\",name:\"name\",control:q,invalid:Boolean(P.name),placeholder:\"Insert your name\"}),m(a.B,{for:\"badget-name\"},\"Name\"),P.name&&m(a.x.Feedback,{children:P.name.message}))),m(a.x.Group,null,m(a.w,null,m(c.a,{as:a.z,type:\"textarea\",id:\"badget-description\",name:\"description\",control:q,invalid:Boolean(P.description),placeholder:\"Insert your description\"}),m(a.B,{for:\"badget-description\"},\"Description\"),P.description&&m(a.x.Feedback,{children:P.description.message}))),m(a.x.Group,null,m(a.w,null,m(c.a,{as:a.z,type:\"number\",id:\"badget-points\",name:\"points\",control:q,invalid:Boolean(P.points),placeholder:\"Insert your points\"}),m(a.B,{for:\"badget-points\"},\"Points\"),P.points&&m(a.x.Feedback,{children:P.points.message}))))),m(a.g,{type:\"submit\",variant:\"primary\",disabled:!r},\"Save\"))}},oKyk:function(e,t,n){\"use strict\";n.r(t);var r=n(\"rePB\"),o=n(\"1OyB\"),i=n(\"vuIU\"),a=n(\"Ji7U\"),s=n(\"md7G\"),c=n(\"foSv\"),u=n(\"q1tI\"),l=n.n(u),d=n(\"jwaz\"),p=n(\"N1Wf\"),f=n(\"0ci1\"),h=n(\"ANjH\"),y=n(\"/MKj\"),m=n(\"tCCL\"),b=n(\"qGWM\"),v=n(\"8Kt/\"),g=n.n(v),O=n(\"nOHt\"),w=n.n(O),j=n(\"sXnO\"),q=n(\"2BYM\"),I=n.n(q),P=n(\"tx4t\"),C=n(\"RQ+B\"),x=n(\"J355\"),B=l.a.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var N=I()(j.a),T=N.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",N.stopTimer),e.addEventListener(\"mouseleave\",N.resumeTimer)}}),S=function(e){Object(a.a)(n,e);var t=_(n);function n(e){var r;return Object(o.a)(this,n),r=t.call(this,e),w.a.query.runnerId?r.state={runnerId:w.a.query.runnerId,pathwayId:w.a.query.pathwayId,saved:!1,questions:[]}:w.a.push(\"/pathway/create\"),r}return Object(i.a)(n,[{key:\"componentDidMount\",value:function(){var e=this;this.props.pageChangeHeaderTitle(\"Update Pathway\"),this.props.breadcrumbChange([{text:\"Pathway\",link:\"/\"},{text:\"Runner\",link:\"/runner/create?pathwayId=\"+w.a.query.pathwayId},{text:\"Quiz\"}]);var t=p.b.collection(\"runners\").doc(this.state.runnerId);t.get().then((function(n){n.exists?t.collection(\"questions\").get().then((function(e){var t=[];return e.forEach((function(e){t.push(E({id:e.id},e.data()))})),Promise.resolve(t)})).then((function(t){e.setState(E({id:e.state.runnerId,pathwayId:e.state.pathwayId,saved:!0,questions:t},n.data()))})):console.log(\"No such document!\")})).catch((function(e){console.log(\"Error getting documents: \",e),T.fire({icon:\"error\",title:\"Getting a runner\"})}))}},{key:\"render\",value:function(){return this.state.saved?B(l.a.Fragment,null,B(g.a,null,B(\"title\",null,\"Runner | Quiz\")),B(d.s,{fluid:!0},B(d.L,null,B(d.q,{md:\"6\"},B(d.I,null,B(d.I.Header,{bordered:!0},B(d.I.Title,null,\"Runner | Quiz\")),B(d.I.Body,null,B(\"p\",null,\"Add all the questions related to this runner, these questions should help validate the knowledge.\"),B(\"hr\",null),B(x.default,{activityChange:this.props.activityChange,saved:this.state.saved,runnerId:this.state.runnerId,pathwayId:this.state.pathwayId,data:this.state.questions})))),B(d.q,{md:\"6\"},B(d.I,null,B(d.I.Header,{bordered:!0},B(d.I.Title,null,\"Badget\")),B(d.I.Body,null,B(\"p\",null,\"This badge is awarded to the trainee if they successfully complete the Quiz.                  \"),B(\"hr\",null),B(C.default,{activityChange:this.props.activityChange,saved:this.state.saved,runnerId:this.state.runnerId,pathwayId:this.state.pathwayId,data:this.state}))))))):B(P.a,null,\"Loading\")}}]),n}(l.a.Component);t.default=Object(y.a)(null,(function(e){return Object(h.a)({pageChangeHeaderTitle:f.d,breadcrumbChange:f.b,activityChange:f.a},e)}))(Object(b.a)(Object(m.a)(S)))}},[[\"Fn2i\",0,1,4,8,10,3,2,5,6,7,9,11,12]]]);","extractedComments":[]}