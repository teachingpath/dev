{"code":"_N_E=(self.webpackJsonp_N_E=self.webpackJsonp_N_E||[]).push([[83],{\"3UD+\":function(e,n){e.exports=function(e){if(!e.webpackPolyfill){var n=Object.create(e);n.children||(n.children=[]),Object.defineProperty(n,\"loaded\",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,\"id\",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(n,\"exports\",{enumerable:!0}),n.webpackPolyfill=1}return n}},J355:function(e,n,t){\"use strict\";t.r(n);var o=t(\"rePB\"),r=t(\"q1tI\"),i=t.n(r),c=t(\"jwaz\"),a=t(\"N1Wf\"),u=t(\"wHSu\"),s=t(\"NKCw\"),l=t(\"UGp+\"),p=t(\"IP2g\"),d=t(\"NWhz\"),f=t(\"sXnO\"),y=t(\"2BYM\"),m=t.n(y),b=t(\"nOHt\"),h=t.n(b),q=i.a.createElement;function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var g=m()(f.a),O=g.mixin({toast:!0,position:\"top-end\",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener(\"mouseenter\",g.stopTimer),e.addEventListener(\"mouseleave\",g.resumeTimer)}});n.default=function(e){var n=e.runnerId,t=e.pathwayId,f=e.saved,y=e.data,m=e.activityChange,b=Object(r.useState)(y),g=b[0],w=b[1],C=l.d().shape({question:l.f().min(5,\"Please enter at least 5 characters\").required(\"Please enter your question\"),type:l.f().required(\"Please enter your type\"),options:l.a().min(2,\"Please enter at least 2 options\").required(\"Please enter your options\")}),P=Object(s.e)({resolver:Object(d.a)(C),defaultValues:{question:\"\",type:\"\",options:[]}}),_=P.control,j=P.handleSubmit,N=P.errors,k=P.setValue,x=P.reset,E=Object(s.d)({control:_,name:\"options\"}),B=E.fields,I=E.append,A=E.remove,S=function(){return a.b.collection(\"runners\").doc(n).collection(\"questions\").get().then((function(e){var n=[];e.forEach((function(e){n.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){Object(o.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({id:e.id},e.data()))})),w(n)}))},T=function(e){!function(e,n,t){e.collection(\"questions\").doc(n).delete().then((function(){return t()})).catch((function(e){console.error(\"Error removing document: \",e)}))}(a.b.collection(\"runners\").doc(n),e,(function(){return m({pathwayId:t,type:\"delete_question\",msn:\"The question deleted.\"}),S()}))};return q(i.a.Fragment,null,q(c.N,null,q(c.N.Header,{bordered:!0},q(c.N.Icon,null,q(p.a,{icon:u.wb})),q(c.N.Title,null,\"Quiz\"),q(c.N.Addon,null,q(c.w.Uncontrolled,null,q(c.e,{className:\"mr-2\"},\"Questions \",g.length),q(c.w.Toggle,{icon:!0,variant:\"text-secondary\"},q(p.a,{icon:u.ob})),q(c.w.Menu,{right:!0,animated:!0},g.map((function(e){return q(c.w.Item,{key:e.id,className:\"text-right\"},(n=e.question,t=70,n.slice(0,t)+(n.length>t?\"...\":\"\")),q(c.c,{circle:!0,onClick:function(){!function(e){k(\"question\",e.question),k(\"type\",e.type),k(\"id\",e.id),k(\"options\",e.options)}(e)}},q(p.a,{icon:u.W})),q(c.c,{circle:!0,onClick:function(){T(e.id)}},q(p.a,{icon:u.Jb})));var n,t})))))),q(c.N.Body,null,q(c.A,{onSubmit:j((function(e){var o=a.b.collection(\"runners\").doc(n);e.id?function(e,n,t){e.collection(\"questions\").doc(n.id).set({question:n.question,type:n.type,options:n.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return t()})).catch((function(e){O.fire({icon:\"error\",title:\"Creation question\"})}))}(o,e,(function(){return O.fire({icon:\"success\",title:\"Question saved successfully\"}),k(\"id\",null),m({pathwayId:t,type:\"edit_question\",msn:\"The  question created.\"}),x(),S()})):function(e,n,t){e.collection(\"questions\").add({question:n.question,type:n.type,options:n.options.map((function(e){return{name:e.name,isCorrect:!0===e.isCorrect}}))}).then((function(e){return t()})).catch((function(e){console.error(e),O.fire({icon:\"error\",title:\"Creation question\"})}))}(o,e,(function(){return O.fire({icon:\"success\",title:\"Question saved successfully\"}),m({pathwayId:t,type:\"new_question\",msn:\"The  question updated.\"}),x(),S()}))}))},q(c.A.Group,null,q(c.y,null,q(s.a,{as:c.D,type:\"textarea\",id:\"question\",name:\"question\",control:_,invalid:Boolean(N.question),placeholder:\"Insert your question\"}),q(c.F,{for:\"question\"},\"Question\"),N.question&&q(c.A.Feedback,{children:N.question.message}))),q(c.A.Group,null,q(s.a,{as:c.u,type:\"select\",name:\"type\",id:\"type\",control:_,invalid:Boolean(N.type)},q(\"option\",{value:\"default\"},\"Select your type\"),q(\"option\",{value:\"multiple\"},\"Multiple\"),q(\"option\",{value:\"single\"},\"Single\"),q(\"option\",{value:\"yes_no\"},\"Yes/No\")),N.type&&q(c.A.Feedback,{children:N.type.message})),B.map((function(e,n){return q(c.Q,{key:e.id,className:\"pt-4\"},q(c.r,{xs:\"11\"},q(c.A.Group,null,q(c.y,null,q(s.a,{as:c.D,defaultValue:e.name||\"\",type:\"textarea\",id:\"options_\".concat(n,\"_.name\"),name:\"options[\".concat(n,\"].name\"),control:_}),q(c.F,{for:\"options_\".concat(n,\"_.name\")},\"Option#\",n+1)))),q(c.r,{xs:\"1\"},q(c.h,{type:\"button\",onClick:function(){return A(n)}},q(p.a,{icon:u.Jb}))),q(c.r,{xs:\"12\"},q(c.A.Group,null,q(c.y,null,q(s.a,{name:\"options[\".concat(n,\"].isCorrect\"),control:_,render:function(t){var o=t.onChange,r=t.onBlur,i=t.value,a=(t.name,t.ref);return q(c.u,{type:\"checkbox\",id:\"options_\".concat(n,\"_.isCorrect\"),label:\"it's correct?\",onBlur:r,name:\"options[\".concat(n,\"].isCorrect\"),onChange:function(e){return o(e.target.checked)},checked:e.isCorrect||i,innerRef:a})}})))))})),q(\"p\",{className:\"text-right\"},q(c.h,{variant:Boolean(N.options)?\"danger\":\"primary\",type:\"button\",onClick:function(){I({})}},\"Add Option \",q(p.a,{icon:u.ub}))),N.options&&q(c.b,{variant:\"label-danger\"},N.options.message),q(s.a,{as:c.D,control:_,type:\"hidden\",name:\"id\",id:\"id\"}),q(c.N.Footer,{bordered:!0},q(c.h,{disabled:!f,variant:\"primary\"},\"Save and add\"),q(c.h,{type:\"button\",className:\"ml-2\",onClick:function(){h.a.back()}},\"Cancel\"))))))}},anCZ:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/runner/questions\",function(){return t(\"J355\")}])}},[[\"anCZ\",0,1,3,9,11,2,4,8,10,12]]]);","extractedComments":[]}