!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.self=t():e.self=t()}(this,(function(){return(this.webpackJsonpself=this.webpackJsonpself||[]).push([[74],{"5xTo":function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("1OyB"),a=n("vuIU"),i=n("JX7q"),c=n("Ji7U"),s=n("md7G"),u=n("foSv"),l=n("q1tI"),p=n.n(l),d=n("jwaz"),f=n("N1Wf"),h=n("0ci1"),y=n("ANjH"),v=n("/MKj"),b=n("tCCL"),m=n("qGWM"),O=n("8Kt/"),j=n.n(O),w=n("IP2g"),g=n("wHSu"),P=n("nOHt"),I=n.n(P),C=n("sXnO"),E=n("2BYM"),k=n.n(E),D=n("8/9Z"),B=n("tclJ"),x=n("hUEd"),S=n("tx4t"),N=p.a.createElement;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var R=k()(C.a),G=R.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",R.stopTimer),e.addEventListener("mouseleave",R.resumeTimer)}}),L=function(e){Object(c.a)(n,e);var t=q(n);function n(e){var r;return Object(o.a)(this,n),r=t.call(this,e),I.a.query.pathwayId?(r.state={id:I.a.query.pathwayId,saved:!1},r.onEdit=r.onEdit.bind(Object(i.a)(r))):I.a.push("/pathway/create"),r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.pageChangeHeaderTitle("Update Pathway"),this.props.breadcrumbChange([{text:"Pathway",link:"/"},{text:"Update"}]),f.b.collection("pathways").doc(this.state.id).get().then((function(t){t.exists?e.setState(A({id:e.state.id,saved:!0},t.data())):console.log("No such document!")})).catch((function(e){console.log("Error getting documents: ",e),G.fire({icon:"error",title:"Getting a pathway"})}))}},{key:"onEdit",value:function(e){var t=this;f.b.collection("pathways").doc(this.state.id).update(A({},e)).then((function(n){t.setState(A({id:t.state.id,saved:!0},e)),G.fire({icon:"success",title:"Pathway updated successfully"}),t.props.activityChange(A({pathwayId:t.state.id,type:"edit_pathway",msn:'The "'+e.name+'" pathway was changed.'},e))})).catch((function(e){console.error("Error adding document: ",e),G.fire({icon:"error",title:"Creation pathway"})}))}},{key:"render",value:function(){var e=this;return this.state.saved?N(p.a.Fragment,null,N(j.a,null,N("title",null,"Pathway | Edit")),N(d.t,{fluid:!0},N(d.Q,null,N(d.r,{md:"6"},N(d.N,null,N(d.N.Header,{bordered:!0},N(d.N.Title,null,"Pathway | Edit")),N(d.N.Body,null,N(x.default,{onSave:this.onEdit,pathwayId:this.state.id,saved:this.state.saved,data:this.state})))),N(d.r,{md:"6"},N(d.N,null,N(d.N.Header,{bordered:!0},N(d.N.Title,null,"Trophy")),N(d.N.Body,null,N(B.default,{activityChange:this.props.activityChange,pathwayId:this.state.id,data:this.state.trophy,saved:this.state.saved})))),N(d.r,{md:"12"},N(d.N,null,N(d.N.Header,{bordered:!0},N(d.N.Title,null,"Runners")),N(d.N.Body,null,N(D.default,{pathwayId:this.state.id})),N(d.N.Footer,null,N(d.h,{type:"button",disabled:!this.state.saved,onClick:function(){I.a.push({pathname:"/runner/create",query:{pathwayId:e.state.id}})}},"Add Runner",N(w.a,{className:"ml-2",icon:g.ub})))))))):N(S.a,null,"Loading")}}]),n}(p.a.Component);t.default=Object(v.b)(null,(function(e){return Object(y.bindActionCreators)({pageChangeHeaderTitle:h.e,breadcrumbChange:h.c,activityChange:h.a},e)}))(Object(m.a)(Object(b.a)(L)))},"8/9Z":function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("1OyB"),a=n("vuIU"),i=n("JX7q"),c=n("Ji7U"),s=n("md7G"),u=n("foSv"),l=n("q1tI"),p=n.n(l),d=n("jwaz"),f=n("N1Wf"),h=n("M4kO"),y=n("wHSu"),v=n("IP2g"),b=n("nOHt"),m=n.n(b),O=p.a.createElement;function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var P=function(e){Object(c.a)(n,e);var t=g(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={data:e.data||[]},r.onSortList=r.onSortList.bind(Object(i.a)(r)),r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.b.collection("runners").where("pathwayId","==",this.props.pathwayId).orderBy("level").get().then((function(t){var n=[];t.forEach((function(e){n.push({id:e.id,title:e.data().name,subtitle:e.data().description})})),e.setState(w(w({},e.state),{},{data:n}))})).catch((function(e){console.log("Error getting documents: ",e)}))}},{key:"onDelete",value:function(e){var t=this;f.b.collection("runners").doc(e).delete().then((function(){t.componentDidMount()})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"onSortList",value:function(e){e.forEach((function(e,t){f.b.collection("runners").doc(e.id).update({level:t}).catch((function(e){console.error("Error removing document: ",e)}))})),this.setState({data:e})}},{key:"shouldComponentUpdate",value:function(e,t){var n,r;return(null===(n=this.props.item)||void 0===n?void 0:n.runnerId)!==(null===(r=e.item)||void 0===r?void 0:r.runnerId)&&this.componentDidMount(),!0}},{key:"render",value:function(){var e=this;return O(d.P,{bordered:!0,action:!0},O(h.ReactSortable,{list:this.state.data,setList:this.onSortList},this.state.data.map((function(t,n){var r=t.title,o=t.subtitle,a=t.id;return O(d.P.Item,{key:n,href:"javascript:void(0)"},O(d.P.Addon,{addonType:"prepend"},O(d.c,{display:!0},O(v.a,{icon:y.Bb}))),O(d.P.Content,null,O(d.P.Title,null,r),O(d.P.Subtitle,null,o)),O(d.P.Addon,{addonType:"append"},O(d.w.Uncontrolled,null,O(d.w.Toggle,{icon:!0,variant:"text-secondary",href:"javascript:void(0)"},O(v.a,{icon:y.X})),O(d.w.Menu,{right:!0,animated:!0},O(d.w.Item,{href:"javascript:void(0)",onClick:function(){m.a.push({pathname:"/runner/edit",query:{runnerId:a,pathwayId:e.props.pathwayId}})},icon:O(v.a,{icon:y.W})},"Editar"),O(d.w.Item,{href:"javascript:void(0)",onClick:function(){e.onDelete(a)},icon:O(v.a,{icon:y.Kb})},"Delete"),O(d.w.Divider,null),O(d.w.Item,{href:"javascript:void(0)",onClick:function(){m.a.push({pathname:"/runner/quiz",query:{runnerId:a,pathwayId:e.props.pathwayId}})},icon:O(v.a,{icon:y.wb})},"Add Quiz"),O(d.w.Item,{href:"javascript:void(0)",onClick:function(){m.a.push({pathname:"/track/create",query:{runnerId:a,pathwayId:e.props.pathwayId}})},icon:O(v.a,{icon:y.ob})},"Add Tracks")))))}))))}}]),n}(p.a.Component);t.default=P},NPvn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathway/edit",function(){return n("5xTo")}])},hUEd:function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("q1tI"),a=n.n(o),i=n("jwaz"),c=n("NKCw"),s=n("UGp+"),u=n("NWhz"),l=n("nOHt"),p=n.n(l),d=n("RLfC"),f=n.n(d),h=n("sXnO"),y=n("2BYM"),v=n.n(y),b=a.a.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=v()(h.a),w=j.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",j.stopTimer),e.addEventListener("mouseleave",j.resumeTimer)}});t.default=function(e){var t,n=e.onSave,r=e.data,a=Object(o.useState)({preview:(null===r||void 0===r||null===(t=r.image)||void 0===t?void 0:t.preview)||"",src:""}),l=a[0],d=a[1],h=s.d().shape({name:s.f().min(5,"Please enter at least 5 characters").required("Please enter your name"),description:s.f().min(5,"Please enter at least 5 characters").required("Please enter your description")}),y=Object(c.e)({resolver:Object(u.a)(h),defaultValues:{name:(null===r||void 0===r?void 0:r.name)||"",description:(null===r||void 0===r?void 0:r.description)||"",tags:(null===r||void 0===r?void 0:r.tags)||""}}),v=y.control,m=y.handleSubmit,j=y.errors;return b(i.A,{onSubmit:m((function(e){n(O(O({},e),{},{image:l}))}))},b(i.Q,null,b(i.r,{xs:"6"},b(i.A.Group,null,b(f.a,{width:130,height:130,onCrop:function(e){d({preview:e})},onClose:function(){d({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(w.fire({icon:"error",title:"The image is very large"}),e.target.value="")},src:l.src,label:"Pathway icon"}))),b(i.r,{xs:"6"},b(i.A.Group,null,l.preview&&b("img",{src:l.preview,alt:"Preview"}))),b(i.r,{xs:"12"},b(i.A.Group,null,b(i.y,null,b(c.a,{as:i.D,type:"text",id:"name",name:"name",control:v,invalid:Boolean(j.name),placeholder:"Insert your name"}),b(i.F,{for:"name"},"Name"),j.name&&b(i.A.Feedback,{children:j.name.message}))),b(i.A.Group,null,b(i.y,null,b(c.a,{as:i.D,type:"textarea",id:"description",name:"description",control:v,invalid:Boolean(j.description),placeholder:"Insert your description"}),b(i.F,{for:"description"},"Description"),j.description&&b(i.A.Feedback,{children:j.description.message}))),b(i.A.Group,null,b(i.y,null,b(c.a,{as:i.D,type:"text",id:"tags",name:"tags",control:v,placeholder:"Insert your tags separated by commas"}),b(i.F,{for:"tags"},"Tags"))))),b(i.h,{type:"submit",variant:"primary"},null===r||void 0===r?"Create":"Update"),b(i.h,{type:"button",className:"ml-2",onClick:function(){p.a.back()}},"Cancel"))}},qGWM:function(e,t,n){"use strict";var r=n("o0o1"),o=n.n(r),a=n("rePB"),i=n("HaE+"),c=n("1OyB"),s=n("vuIU"),u=n("Ji7U"),l=n("md7G"),p=n("foSv"),d=n("q1tI"),f=n.n(d),h=n("ANjH"),y=n("0ci1"),v=n("/MKj"),b=n("qP+2"),m=n("nOHt"),O=n.n(m),j=n("s6m4"),w=f.a.createElement;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}t.a=function(e){var t=function(t){Object(u.a)(r,t);var n=I(r);function r(){return Object(c.a)(this,r),n.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.firebaseChange(this.props.firebase)}},{key:"render",value:function(){return w(e,this.props)}}],[{key:"getInitialProps",value:function(){var t=Object(i.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},!e.getInitialProps){t.next=5;break}return t.next=4,e.getInitialProps(n);case 4:r=t.sent;case 5:return t.next=7,Object(b.a)(n);case 7:if(a=t.sent){t.next=11;break}return n.res?(n.res.writeHead(302,{Location:j.a.loginPagePath}),n.res.end()):O.a.push(j.a.loginPagePath),t.abrupt("return",P(P({},r),{},{firebase:null}));case 11:return t.abrupt("return",P(P({},r),{},{firebase:a}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),r}(f.a.Component);return Object(v.b)(null,(function(e){return Object(h.bindActionCreators)({firebaseChange:y.d},e)}))(t)}},tclJ:function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("q1tI"),a=n.n(o),i=n("jwaz"),c=n("N1Wf"),s=n("NKCw"),u=n("UGp+"),l=n("NWhz"),p=n("sXnO"),d=n("2BYM"),f=n.n(d),h=n("RLfC"),y=n.n(h),v=a.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=f()(p.a),j=O.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",O.stopTimer),e.addEventListener("mouseleave",O.resumeTimer)}});t.default=function(e){var t,n=e.pathwayId,r=e.saved,a=e.data,p=e.activityChange,d=Object(o.useState)({preview:(null===a||void 0===a||null===(t=a.image)||void 0===t?void 0:t.preview)||"",src:""}),f=d[0],h=d[1],b=u.d().shape({name:u.f().min(5,"Please enter at least 5 characters").required("Please enter your name"),description:u.f().min(5,"Please enter at least 5 characters").required("Please enter your description"),points:u.c().min(100,"Please enter at least 10 points").required("Please enter your points")}),O=Object(s.e)({resolver:Object(l.a)(b),defaultValues:{name:(null===a||void 0===a?void 0:a.name)||"",description:(null===a||void 0===a?void 0:a.description)||"",points:(null===a||void 0===a?void 0:a.points)||100}}),w=O.control,g=O.handleSubmit,P=O.errors;return v(i.A,{onSubmit:g((function(e){!function(e){c.b.collection("pathways").doc(n).update({trophy:m({},e)}).then((function(t){j.fire({icon:"success",title:"Trophy saved successfully"}),p({pathwayId:n,type:"edit_pathway",msn:'The "'+e.name+'" trophy was changed.'})})).catch((function(e){j.fire({icon:"error",title:"Updating trophy"})}))}(m(m({},e),{},{image:f}))}))},v(i.Q,null,v(i.r,{xs:"6"},v(i.A.Group,null,v(y.a,{width:130,height:130,onCrop:function(e){h({preview:e})},onClose:function(){h({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(j.fire({icon:"error",title:"The image is very large"}),e.target.value="")},src:f.src,label:"Trophy icon"}))),v(i.r,{xs:"6"},v(i.A.Group,null,f.preview&&v("img",{src:f.preview,alt:"Preview"}))),v(i.r,{xs:"12"},v(i.A.Group,null,v(i.y,null,v(s.a,{as:i.D,type:"text",id:"trophy-name",name:"name",control:w,invalid:Boolean(P.name),placeholder:"Insert your name"}),v(i.F,{for:"trophy-name"},"Name"),P.name&&v(i.A.Feedback,{children:P.name.message}))),v(i.A.Group,null,v(i.y,null,v(s.a,{as:i.D,type:"textarea",id:"trophy-description",name:"description",control:w,invalid:Boolean(P.description),placeholder:"Insert your description"}),v(i.F,{for:"trophy-description"},"Description"),P.description&&v(i.A.Feedback,{children:P.description.message}))),v(i.A.Group,null,v(i.y,null,v(s.a,{as:i.D,type:"number",id:"trophy-points",name:"points",control:w,invalid:Boolean(P.points),placeholder:"Insert your points"}),v(i.F,{for:"trophy-points"},"Points"),P.points&&v(i.A.Feedback,{children:P.points.message}))))),v(i.h,{type:"submit",variant:"primary",disabled:!r},null===a||void 0===a?"Add":"Update"))}}},[["NPvn",0,1,3,9,11,2,4,5,6,7,8,10,12,13,14]]])}));