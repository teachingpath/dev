!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports.self=t():e.self=t()}(this,(function(){return(this.webpackJsonpself=this.webpackJsonpself||[]).push([[76],{"3UD+":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},Xqpy:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pathway/trophy",function(){return n("tclJ")}])},tclJ:function(e,t,n){"use strict";n.r(t);var r=n("rePB"),o=n("q1tI"),i=n.n(o),a=n("jwaz"),s=n("N1Wf"),c=n("NKCw"),l=n("UGp+"),p=n("NWhz"),u=n("sXnO"),d=n("2BYM"),f=n.n(d),y=n("RLfC"),m=n.n(y),h=i.a.createElement;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=f()(u.a),O=w.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",w.stopTimer),e.addEventListener("mouseleave",w.resumeTimer)}});t.default=function(e){var t,n=e.pathwayId,r=e.saved,i=e.data,u=e.activityChange,d=Object(o.useState)({preview:(null===i||void 0===i||null===(t=i.image)||void 0===t?void 0:t.preview)||"",src:""}),f=d[0],y=d[1],b=l.d().shape({name:l.f().min(5,"Please enter at least 5 characters").required("Please enter your name"),description:l.f().min(5,"Please enter at least 5 characters").required("Please enter your description"),points:l.c().min(100,"Please enter at least 10 points").required("Please enter your points")}),w=Object(c.e)({resolver:Object(p.a)(b),defaultValues:{name:(null===i||void 0===i?void 0:i.name)||"",description:(null===i||void 0===i?void 0:i.description)||"",points:(null===i||void 0===i?void 0:i.points)||100}}),P=w.control,g=w.handleSubmit,j=w.errors;return h(a.A,{onSubmit:g((function(e){!function(e){s.b.collection("pathways").doc(n).update({trophy:v({},e)}).then((function(t){O.fire({icon:"success",title:"Trophy saved successfully"}),u({pathwayId:n,type:"edit_pathway",msn:'The "'+e.name+'" trophy was changed.'})})).catch((function(e){O.fire({icon:"error",title:"Updating trophy"})}))}(v(v({},e),{},{image:f}))}))},h(a.Q,null,h(a.r,{xs:"6"},h(a.A.Group,null,h(m.a,{width:130,height:130,onCrop:function(e){y({preview:e})},onClose:function(){y({preview:null})},onBeforeFileLoad:function(e){e.target.files[0].size>71680&&(O.fire({icon:"error",title:"The image is very large"}),e.target.value="")},src:f.src,label:"Trophy icon"}))),h(a.r,{xs:"6"},h(a.A.Group,null,f.preview&&h("img",{src:f.preview,alt:"Preview"}))),h(a.r,{xs:"12"},h(a.A.Group,null,h(a.y,null,h(c.a,{as:a.D,type:"text",id:"trophy-name",name:"name",control:P,invalid:Boolean(j.name),placeholder:"Insert your name"}),h(a.F,{for:"trophy-name"},"Name"),j.name&&h(a.A.Feedback,{children:j.name.message}))),h(a.A.Group,null,h(a.y,null,h(c.a,{as:a.D,type:"textarea",id:"trophy-description",name:"description",control:P,invalid:Boolean(j.description),placeholder:"Insert your description"}),h(a.F,{for:"trophy-description"},"Description"),j.description&&h(a.A.Feedback,{children:j.description.message}))),h(a.A.Group,null,h(a.y,null,h(c.a,{as:a.D,type:"number",id:"trophy-points",name:"points",control:P,invalid:Boolean(j.points),placeholder:"Insert your points"}),h(a.F,{for:"trophy-points"},"Points"),j.points&&h(a.A.Feedback,{children:j.points.message}))))),h(a.h,{type:"submit",variant:"primary",disabled:!r},null===i||void 0===i?"Add":"Update"))}}},[["Xqpy",0,1,3,9,11,2,8,10,12,13]]])}));